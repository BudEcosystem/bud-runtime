# 2026-02-09 Learnings

## [10:20] budadmin must route ALL API calls through budapp

**Category**: architecture
**Service**: budadmin, budapp
**Tags**: auth, api-routing, keycloak, proxy, budusecases

> budadmin frontend must NEVER call backend services directly. All API calls must go through budapp, which handles Keycloak JWT authentication and acts as the API gateway. The correct pattern is: budadmin → budapp (auth + proxy) → target service. budapp needs proxy endpoints for each service (like BudPipelineService for budpipeline). The budadmin API client should use the standard AppRequest that calls budapp's base URL, not separate axios instances with Next.js rewrites to internal services.

**Context**: The budusecases integration was incorrectly implemented with a Next.js rewrite proxying directly to `ditto-budusecases:9084`, bypassing budapp auth entirely. This caused 500 errors (ECONNREFUSED to localhost:9084 because the rewrite destination was baked at build time from `.env`), and more importantly, had no authentication.

---
