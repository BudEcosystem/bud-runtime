{
  "response_success_1": [
    {
      "Timestamp": "2026-01-31 10:35:11.788719240",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "758ded06f2bff242",
      "ParentSpanId": "",
      "TraceState": "",
      "SpanName": "gateway_analytics",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "8817559",
        "gateway_analytics.browser_name": "PostmanRuntime",
        "gateway_analytics.browser_version": "7.51",
        "gateway_analytics.client_ip": "unknown",
        "gateway_analytics.device_type": "desktop",
        "gateway_analytics.gateway_processing_ms": "5",
        "gateway_analytics.id": "019c139e-fa2c-70b0-97aa-d3db1d1d36b5",
        "gateway_analytics.is_bot": "false",
        "gateway_analytics.method": "POST",
        "gateway_analytics.os_name": "Other",
        "gateway_analytics.path": "/v1/responses",
        "gateway_analytics.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "gateway_analytics.prompt_id": "test_structured_data",
        "gateway_analytics.prompt_version": "1",
        "gateway_analytics.protocol_version": "HTTP/1.1",
        "gateway_analytics.request_headers": "{\"accept\":\"*/*\",\"content-type\":\"application/json\"}",
        "gateway_analytics.request_timestamp": "2026-01-31T10:35:11.788884118+00:00",
        "gateway_analytics.response_headers": "{\"content-type\":\"application/json\"}",
        "gateway_analytics.response_timestamp": "2026-01-31T10:35:22.387930243+00:00",
        "gateway_analytics.status_code": "200",
        "gateway_analytics.tags": "{}",
        "gateway_analytics.total_duration_ms": "10599",
        "gateway_analytics.user_agent": "PostmanRuntime/7.51.0",
        "gen_ai.usage.input_tokens": "1534",
        "gen_ai.usage.output_tokens": "446",
        "gen_ai.usage.total_tokens": "1980",
        "idle_ns": "10590973648",
        "level": "INFO",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc"
      },
      "Duration": 10599780347,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.791544090",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "5e7b4b63f9b91871",
      "ParentSpanId": "758ded06f2bff242",
      "TraceState": "",
      "SpanName": "POST /v1/responses",
      "SpanKind": "Server",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "5064875",
        "http.request.method": "POST",
        "http.route": "/v1/responses",
        "idle_ns": "10591992443",
        "level": "INFO",
        "network.protocol.version": "1.1",
        "server.address": "localhost:56054",
        "span.type": "web",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "url.path": "/v1/responses",
        "url.scheme": "",
        "user_agent.original": "PostmanRuntime/7.51.0"
      },
      "Duration": 10597048030,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.792305963",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "1017afe0690b7d0c",
      "ParentSpanId": "5e7b4b63f9b91871",
      "TraceState": "",
      "SpanName": "response_create_handler_observability",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "3881657",
        "gen_ai.gateway_request": "{\"input\":\"Create a dynamic output\",\"prompt\":{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}}",
        "gen_ai.gateway_response": "{\"id\":\"resp_25f36a1f93db4e009b5b1512854621ef\",\"object\":\"response\",\"created_at\":1769855722,\"status\":\"completed\",\"background\":false,\"instructions\":[{\"content\":[{\"text\":\"You are expert to create structured data make sure to give this in structured data\",\"type\":\"input_text\"}],\"role\":\"system\",\"type\":\"message\"},{\"content\":[],\"role\":\"user\",\"type\":\"message\"}],\"max_output_tokens\":2000,\"model\":\"gpt\",\"output\":[{\"id\":\"msg_538003ed357841c09917689e20b8c79a\",\"content\":[{\"annotations\":[],\"text\":\"{\\\"name\\\": \\\"Sample Response\\\", \\\"age\\\": 30, \\\"country\\\": \\\"USA\\\"}\",\"type\":\"output_text\",\"logprobs\":null}],\"role\":\"assistant\",\"status\":\"completed\",\"type\":\"message\"}],\"parallel_tool_calls\":true,\"prompt\":{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"},\"reasoning\":{\"effort\":null,\"generate_summary\":null,\"summary\":null},\"temperature\":0.7,\"text\":{\"format\":{\"name\":\"OutputSchema\",\"schema\":{\"$defs\":{\"Output\":{\"properties\":{\"name\":{\"description\":\"The name of the user\",\"title\":\"Name\",\"type\":\"string\"},\"age\":{\"title\":\"Age\",\"type\":\"integer\"},\"country\":{\"title\":\"Country\",\"type\":\"string\"}},\"required\":[\"age\",\"name\",\"country\"],\"title\":\"Output\",\"type\":\"object\"}},\"properties\":{\"content\":{\"$ref\":\"#/$defs/Output\"}},\"required\":[\"content\"],\"title\":\"OutputSchema\",\"type\":\"object\"},\"type\":\"json_schema\",\"description\":null,\"strict\":true},\"verbosity\":null},\"tool_choice\":\"auto\",\"tools\":[],\"usage\":{\"input_tokens\":1534,\"input_tokens_details\":{\"cached_tokens\":0},\"output_tokens\":446,\"output_tokens_details\":{\"reasoning_tokens\":0},\"total_tokens\":1980}}",
        "gen_ai.inference_id": "019c139e-fa30-7ad3-8ecc-4d1b2195ebd8",
        "gen_ai.input.messages": "Create a dynamic output",
        "gen_ai.operation.name": "response_create",
        "gen_ai.output.messages": "[{\"id\":\"msg_538003ed357841c09917689e20b8c79a\",\"content\":[{\"annotations\":[],\"text\":\"{\\\"name\\\": \\\"Sample Response\\\", \\\"age\\\": 30, \\\"country\\\": \\\"USA\\\"}\",\"type\":\"output_text\",\"logprobs\":null}],\"role\":\"assistant\",\"status\":\"completed\",\"type\":\"message\"}]",
        "gen_ai.output.type": "{\"format\":{\"name\":\"OutputSchema\",\"schema\":{\"$defs\":{\"Output\":{\"properties\":{\"name\":{\"description\":\"The name of the user\",\"title\":\"Name\",\"type\":\"string\"},\"age\":{\"title\":\"Age\",\"type\":\"integer\"},\"country\":{\"title\":\"Country\",\"type\":\"string\"}},\"required\":[\"age\",\"name\",\"country\"],\"title\":\"Output\",\"type\":\"object\"}},\"properties\":{\"content\":{\"$ref\":\"#/$defs/Output\"}},\"required\":[\"content\"],\"title\":\"OutputSchema\",\"type\":\"object\"},\"type\":\"json_schema\",\"description\":null,\"strict\":true},\"verbosity\":null}",
        "gen_ai.processing_time_ms": "10595",
        "gen_ai.prompt": "{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}",
        "gen_ai.prompt.id": "test_structured_data",
        "gen_ai.prompt.variables": "{}",
        "gen_ai.prompt.version": "1",
        "gen_ai.raw_request": "{\"input\":\"Create a dynamic output\",\"prompt\":{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}}",
        "gen_ai.raw_response": "{\"id\":\"resp_25f36a1f93db4e009b5b1512854621ef\",\"created_at\":1769855722,\"error\":null,\"incomplete_details\":null,\"instructions\":[{\"content\":[{\"text\":\"You are expert to create structured data make sure to give this in structured data\",\"type\":\"input_text\"}],\"role\":\"system\",\"type\":\"message\"},{\"content\":[],\"role\":\"user\",\"type\":\"message\"}],\"metadata\":null,\"model\":\"gpt\",\"object\":\"response\",\"output\":[{\"id\":\"msg_538003ed357841c09917689e20b8c79a\",\"content\":[{\"annotations\":[],\"text\":\"{\\\"name\\\": \\\"Sample Response\\\", \\\"age\\\": 30, \\\"country\\\": \\\"USA\\\"}\",\"type\":\"output_text\",\"logprobs\":null}],\"role\":\"assistant\",\"status\":\"completed\",\"type\":\"message\"}],\"parallel_tool_calls\":true,\"temperature\":0.7,\"tool_choice\":\"auto\",\"tools\":[],\"top_p\":null,\"background\":false,\"completed_at\":null,\"conversation\":null,\"max_output_tokens\":2000,\"max_tool_calls\":null,\"previous_response_id\":null,\"prompt\":{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"},\"prompt_cache_key\":null,\"prompt_cache_retention\":null,\"reasoning\":{\"effort\":null,\"generate_summary\":null,\"summary\":null},\"safety_identifier\":null,\"service_tier\":null,\"status\":\"completed\",\"text\":{\"format\":{\"name\":\"OutputSchema\",\"schema\":{\"$defs\":{\"Output\":{\"properties\":{\"name\":{\"description\":\"The name of the user\",\"title\":\"Name\",\"type\":\"string\"},\"age\":{\"title\":\"Age\",\"type\":\"integer\"},\"country\":{\"title\":\"Country\",\"type\":\"string\"}},\"required\":[\"age\",\"name\",\"country\"],\"title\":\"Output\",\"type\":\"object\"}},\"properties\":{\"content\":{\"$ref\":\"#/$defs/Output\"}},\"required\":[\"content\"],\"title\":\"OutputSchema\",\"type\":\"object\"},\"type\":\"json_schema\",\"description\":null,\"strict\":true},\"verbosity\":null},\"top_logprobs\":null,\"truncation\":null,\"usage\":{\"input_tokens\":1534,\"input_tokens_details\":{\"cached_tokens\":0},\"output_tokens\":446,\"output_tokens_details\":{\"reasoning_tokens\":0},\"total_tokens\":1980},\"user\":null}",
        "gen_ai.request_arrival_time": "2026-01-31T10:35:11.792338114+00:00",
        "gen_ai.request_forward_time": "2026-01-31T10:35:22.386889748+00:00",
        "gen_ai.response.background": "false",
        "gen_ai.response.created_at": "1769855722",
        "gen_ai.response.id": "resp_25f36a1f93db4e009b5b1512854621ef",
        "gen_ai.response.max_output_tokens": "2000",
        "gen_ai.response.model": "gpt",
        "gen_ai.response.object": "response",
        "gen_ai.response.parallel_tool_calls": "true",
        "gen_ai.response.prompt": "{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}",
        "gen_ai.response.reasoning": "{\"effort\":null,\"generate_summary\":null,\"summary\":null}",
        "gen_ai.response.status": "completed",
        "gen_ai.response.temperature": "0.699999988079071",
        "gen_ai.response.tool_choice": "auto",
        "gen_ai.response.tools": "[]",
        "gen_ai.response_time_ms": "10594",
        "gen_ai.system.instructions": "[{\"content\":[{\"text\":\"You are expert to create structured data make sure to give this in structured data\",\"type\":\"input_text\"}],\"role\":\"system\",\"type\":\"message\"},{\"content\":[],\"role\":\"user\",\"type\":\"message\"}]",
        "gen_ai.usage": "{\"input_tokens\":1534,\"input_tokens_details\":{\"cached_tokens\":0},\"output_tokens\":446,\"output_tokens_details\":{\"reasoning_tokens\":0},\"total_tokens\":1980}",
        "gen_ai.usage.input_tokens": "1534",
        "gen_ai.usage.output_tokens": "446",
        "gen_ai.usage.total_tokens": "1980",
        "idle_ns": "10591479661",
        "level": "INFO",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc",
        "gen_ai.ttft_ms": "250"
      },
      "Duration": 10595349566,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.792658663",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "752477303ea1a9fd",
      "ParentSpanId": "1017afe0690b7d0c",
      "TraceState": "",
      "SpanName": "model_execute_response_with_detection",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2621541",
        "idle_ns": "10591595919",
        "level": "INFO",
        "model_name": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 10594208583,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.792701813",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "bd4d8fbe9f9edff1",
      "ParentSpanId": "752477303ea1a9fd",
      "TraceState": "",
      "SpanName": "model_provider_execute_response_with_detection",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2483810",
        "idle_ns": "10591656206",
        "level": "INFO",
        "provider_name": "budprompt",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 10594136790,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.792723794",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "6d8ee65a076d2848",
      "ParentSpanId": "bd4d8fbe9f9edff1",
      "TraceState": "",
      "SpanName": "budprompt_execute_response",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2273340",
        "idle_ns": "10591764184",
        "level": "INFO",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 10594034639,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.797094950",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "4b80dea7961ab8b3",
      "ParentSpanId": "6d8ee65a076d2848",
      "TraceState": "",
      "SpanName": "invoke_agent budprompt",
      "SpanKind": "Internal",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "budprompt.responses.services",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "gen_ai.input.messages": "Create a dynamic output",
        "gen_ai.operation.name": "invoke_agent",
        "gen_ai.output.messages": "[{\"id\": \"msg_538003ed357841c09917689e20b8c79a\", \"content\": [{\"annotations\": [], \"text\": \"{\\\"name\\\": \\\"Sample Response\\\", \\\"age\\\": 30, \\\"country\\\": \\\"USA\\\"}\", \"type\": \"output_text\", \"logprobs\": null}], \"role\": \"assistant\", \"status\": \"completed\", \"type\": \"message\"}]",
        "gen_ai.output.type": "{\"format\":{\"name\":\"OutputSchema\",\"schema_\":{\"$defs\":{\"Output\":{\"properties\":{\"name\":{\"description\":\"The name of the user\",\"title\":\"Name\",\"type\":\"string\"},\"age\":{\"title\":\"Age\",\"type\":\"integer\"},\"country\":{\"title\":\"Country\",\"type\":\"string\"}},\"required\":[\"age\",\"name\",\"country\"],\"title\":\"Output\",\"type\":\"object\"}},\"properties\":{\"content\":{\"$ref\":\"#/$defs/Output\"}},\"required\":[\"content\"],\"title\":\"OutputSchema\",\"type\":\"object\"},\"type\":\"json_schema\",\"description\":null,\"strict\":true},\"verbosity\":null}",
        "gen_ai.prompt.id": "test_structured_data",
        "gen_ai.prompt.variables": "{}",
        "gen_ai.prompt.version": "1",
        "gen_ai.request.max_tokens": "2000",
        "gen_ai.request.stream": "false",
        "gen_ai.request.temperature": "0.7",
        "gen_ai.response.created_at": "1769855722",
        "gen_ai.response.id": "resp_25f36a1f93db4e009b5b1512854621ef",
        "gen_ai.response.model": "gpt",
        "gen_ai.response.object": "response",
        "gen_ai.response.status": "completed",
        "gen_ai.system_instructions": "[{\"content\": [{\"text\": \"You are expert to create structured data make sure to give this in structured data\", \"type\": \"input_text\"}], \"role\": \"system\", \"type\": \"message\"}, {\"content\": [], \"role\": \"user\", \"type\": \"message\"}]",
        "gen_ai.usage.input_tokens": "1534",
        "gen_ai.usage.output_tokens": "446",
        "gen_ai.usage.total_tokens": "1980"
      },
      "Duration": 10548372559,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.804361782",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "bf984dcb6b71cdf9",
      "ParentSpanId": "4b80dea7961ab8b3",
      "TraceState": "",
      "SpanName": "invoke_agent agent",
      "SpanKind": "Internal",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "pydantic-ai",
      "ScopeVersion": "1.4.0",
      "SpanAttributes": {
        "agent_name": "agent",
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "final_result": "{\"name\": \"Sample Response\", \"age\": 30, \"country\": \"USA\"}",
        "gen_ai.agent.name": "agent",
        "gen_ai.usage.input_tokens": "1534",
        "gen_ai.usage.output_tokens": "446",
        "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"pydantic_ai.all_messages\": {\"type\": \"array\"}, \"pydantic_ai.new_message_index\": {}, \"final_result\": {\"type\": \"object\"}}}",
        "logfire.msg": "agent run",
        "model_name": "gpt",
        "pydantic_ai.all_messages": "[{\"role\": \"system\", \"parts\": [{\"type\": \"text\", \"content\": \"You are expert to create structured data make sure to give this in structured data\"}]}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"Create a dynamic output\"}]}, {\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\"}], \"finish_reason\": \"stop\"}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"1 validation errors: [\\n  {\\n    \\\"type\\\": \\\"json_invalid\\\",\\n    \\\"loc\\\": [],\\n    \\\"msg\\\": \\\"Invalid JSON: expected value at line 1 column 1\\\",\\n    \\\"input\\\": \\\"```json\\\\n{\\\\n  \\\\\\\"response_type\\\\\\\": \\\\\\\"dynamic_output\\\\\\\",\\\\n  \\\\\\\"timestamp\\\\\\\": \\\\\\\"2024-06-27T12:00:00Z\\\\\\\",\\\\n  \\\\\\\"data\\\\\\\": {\\\\n    \\\\\\\"message\\\\\\\": \\\\\\\"This is a dynamic output generated based on the current context.\\\\\\\",\\\\n    \\\\\\\"values\\\\\\\": [\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 1,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item One\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"active\\\\\\\"\\\\n      },\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 2,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item Two\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"inactive\\\\\\\"\\\\n      }\\\\n    ]\\\\n  },\\\\n  \\\\\\\"metadata\\\\\\\": {\\\\n    \\\\\\\"generated_by\\\\\\\": \\\\\\\"structured_data_expert\\\\\\\",\\\\n    \\\\\\\"version\\\\\\\": \\\\\\\"1.0\\\\\\\"\\\\n  }\\\\n}\\\\n```\\\"\\n  }\\n]\\n\\nFix the errors and try again.\"}]}, {\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\"}], \"finish_reason\": \"stop\"}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"3 validation errors: [\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"name\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"age\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"country\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  }\\n]\\n\\nFix the errors and try again.\"}]}, {\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"name\\\": \\\"Sample Response\\\",\\n  \\\"age\\\": 30,\\n  \\\"country\\\": \\\"USA\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\"}], \"finish_reason\": \"stop\"}]",
        "pydantic_ai.new_message_index": "1"
      },
      "Duration": 10539807099,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.805049096",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "53705f5bc5581239",
      "ParentSpanId": "bf984dcb6b71cdf9",
      "TraceState": "",
      "SpanName": "chat gpt",
      "SpanKind": "Internal",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "pydantic-ai",
      "ScopeVersion": "1.4.0",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "gen_ai.input.messages": "[{\"role\": \"system\", \"parts\": [{\"type\": \"text\", \"content\": \"You are expert to create structured data make sure to give this in structured data\"}]}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"Create a dynamic output\"}]}]",
        "gen_ai.operation.name": "chat",
        "gen_ai.output.messages": "[{\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\"}], \"finish_reason\": \"stop\"}]",
        "gen_ai.request.frequency_penalty": "0",
        "gen_ai.request.max_tokens": "2000",
        "gen_ai.request.model": "gpt",
        "gen_ai.request.presence_penalty": "0",
        "gen_ai.request.temperature": "0.7",
        "gen_ai.response.finish_reasons": "[\"stop\"]",
        "gen_ai.response.id": "019c139e-fa4a-7d22-9205-06bd08c3e13a",
        "gen_ai.response.model": "gpt",
        "gen_ai.system": "openai",
        "gen_ai.usage.input_tokens": "30",
        "gen_ai.usage.output_tokens": "144",
        "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"gen_ai.input.messages\": {\"type\": \"array\"}, \"gen_ai.output.messages\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
        "model_request_parameters": "{\"function_tools\": [], \"builtin_tools\": [], \"output_mode\": \"native\", \"output_object\": {\"json_schema\": {\"properties\": {\"name\": {\"type\": \"string\"}, \"age\": {\"type\": \"integer\"}, \"country\": {\"type\": \"string\"}}, \"required\": [\"name\", \"age\", \"country\"], \"type\": \"object\", \"additionalProperties\": false}, \"name\": \"Output\", \"description\": null, \"strict\": true}, \"output_tools\": [], \"allow_text_output\": true, \"allow_image_output\": false}",
        "server.address": "localhost",
        "server.port": "56054"
      },
      "Duration": 3260580733,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.808050425",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "6a12e5e116017d35",
      "ParentSpanId": "53705f5bc5581239",
      "TraceState": "",
      "SpanName": "POST",
      "SpanKind": "Client",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "opentelemetry.instrumentation.httpx",
      "ScopeVersion": "0.60b1",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "http.method": "POST",
        "http.status_code": "200",
        "http.url": "http://localhost:56054/v1/chat/completions"
      },
      "Duration": 3255370756,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.812754910",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "4f071942ce4661ef",
      "ParentSpanId": "6a12e5e116017d35",
      "TraceState": "",
      "SpanName": "gateway_analytics",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "11347827",
        "gateway_analytics.browser_name": "Other",
        "gateway_analytics.client_ip": "unknown",
        "gateway_analytics.device_type": "desktop",
        "gateway_analytics.gateway_processing_ms": "9",
        "gateway_analytics.id": "019c139e-fa45-71b1-8623-fbd1b9765577",
        "gateway_analytics.inference_id": "019c139e-fa4a-7d22-9205-06bd08c3e13a",
        "gateway_analytics.is_bot": "false",
        "gateway_analytics.method": "POST",
        "gateway_analytics.os_name": "Other",
        "gateway_analytics.path": "/v1/chat/completions",
        "gateway_analytics.protocol_version": "HTTP/1.1",
        "gateway_analytics.request_headers": "{\"accept\":\"application/json\",\"content-type\":\"application/json\"}",
        "gateway_analytics.request_timestamp": "2026-01-31T10:35:11.813089125+00:00",
        "gateway_analytics.response_headers": "{\"content-type\":\"application/json\"}",
        "gateway_analytics.response_timestamp": "2026-01-31T10:35:15.062202605+00:00",
        "gateway_analytics.status_code": "200",
        "gateway_analytics.tags": "{}",
        "gateway_analytics.total_duration_ms": "3249",
        "gateway_analytics.user_agent": "budprompt v.4.0",
        "idle_ns": "3238590545",
        "level": "INFO",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc"
      },
      "Duration": 3249922703,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.817200769",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "04d8417cfcc69cbe",
      "ParentSpanId": "4f071942ce4661ef",
      "TraceState": "",
      "SpanName": "POST /v1/chat/completions",
      "SpanKind": "Server",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "6344908",
        "http.request.method": "POST",
        "http.route": "/v1/chat/completions",
        "idle_ns": "3239244195",
        "level": "INFO",
        "network.protocol.version": "1.1",
        "server.address": "localhost:56054",
        "span.type": "web",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "url.path": "/v1/chat/completions",
        "url.scheme": "",
        "user_agent.original": "budprompt v.4.0"
      },
      "Duration": 3245576830,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.818545582",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "d5721ddee1dabbbc",
      "ParentSpanId": "04d8417cfcc69cbe",
      "TraceState": "",
      "SpanName": "inference_handler_observability",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "4785293",
        "chat_inference.episode_id": "019c139e-fa4b-7213-922a-22c65e4b0347",
        "chat_inference.extra_body": "[]",
        "chat_inference.function_name": "budgateway::default",
        "chat_inference.id": "019c139e-fa4a-7d22-9205-06bd08c3e13a",
        "chat_inference.inference_params": "{\"chat_completion\":{\"temperature\":0.7,\"max_tokens\":2000,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"json_mode\":\"strict\"}}",
        "chat_inference.input": "{\"system\":\"You are expert to create structured data make sure to give this in structured data\",\"messages\":[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"value\":\"Create a dynamic output\"}]}]}",
        "chat_inference.output": "[{\"type\":\"text\",\"text\":\"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\"}]",
        "chat_inference.processing_time_ms": "3241",
        "chat_inference.tags": "{}",
        "chat_inference.variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "idle_ns": "3238596635",
        "level": "INFO",
        "model_inference.cached": "false",
        "model_inference.endpoint_type": "chat",
        "model_inference.finish_reason": "stop",
        "model_inference.gateway_request": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are expert to create structured data make sure to give this in structured data\"},{\"role\":\"user\",\"content\":\"Create a dynamic output\"}],\"model\":\"gpt-4.1-mini\",\"temperature\":0.699999988079071,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"max_tokens\":2000,\"stream\":false,\"guided_json\":{\"properties\":{\"name\":{\"type\":\"string\"},\"age\":{\"type\":\"integer\"},\"country\":{\"type\":\"string\"}},\"required\":[\"name\",\"age\",\"country\"],\"type\":\"object\",\"additionalProperties\":false},\"logprobs\":false}",
        "model_inference.gateway_response": "{\"id\":\"chatcmpl-D42bpjCmLhsTWSEpK1QQR2r2vHwue\",\"object\":\"chat.completion\",\"created\":1769855713,\"model\":\"gpt-4.1-mini-2025-04-14\",\"choices\":[{\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\",\"refusal\":null,\"annotations\":[]},\"logprobs\":null,\"finish_reason\":\"stop\"}],\"usage\":{\"prompt_tokens\":30,\"completion_tokens\":144,\"total_tokens\":174,\"prompt_tokens_details\":{\"cached_tokens\":0,\"audio_tokens\":0},\"completion_tokens_details\":{\"reasoning_tokens\":0,\"audio_tokens\":0,\"accepted_prediction_tokens\":0,\"rejected_prediction_tokens\":0}},\"service_tier\":\"default\",\"system_fingerprint\":\"fp_e01c6f58e1\"}",
        "model_inference.id": "019c139f-06f4-7441-a0c7-a91596da2374",
        "model_inference.inference_id": "019c139e-fa4a-7d22-9205-06bd08c3e13a",
        "model_inference.input_messages": "[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"Create a dynamic output\"}]}]",
        "model_inference.input_tokens": "30",
        "model_inference.model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference.model_provider_name": "vllm",
        "model_inference.output": "[{\"type\":\"text\",\"text\":\"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\"}]",
        "model_inference.output_tokens": "144",
        "model_inference.raw_request": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are expert to create structured data make sure to give this in structured data\"},{\"role\":\"user\",\"content\":\"Create a dynamic output\"}],\"model\":\"gpt-4.1-mini\",\"temperature\":0.699999988079071,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"max_tokens\":2000,\"stream\":false,\"guided_json\":{\"properties\":{\"name\":{\"type\":\"string\"},\"age\":{\"type\":\"integer\"},\"country\":{\"type\":\"string\"}},\"required\":[\"name\",\"age\",\"country\"],\"type\":\"object\",\"additionalProperties\":false},\"logprobs\":false}",
        "model_inference.raw_response": "{\"id\":\"chatcmpl-D42bpjCmLhsTWSEpK1QQR2r2vHwue\",\"object\":\"chat.completion\",\"created\":1769855713,\"model\":\"gpt-4.1-mini-2025-04-14\",\"choices\":[{\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\",\"refusal\":null,\"annotations\":[]},\"logprobs\":null,\"finish_reason\":\"stop\"}],\"usage\":{\"prompt_tokens\":30,\"completion_tokens\":144,\"total_tokens\":174,\"prompt_tokens_details\":{\"cached_tokens\":0,\"audio_tokens\":0},\"completion_tokens_details\":{\"reasoning_tokens\":0,\"audio_tokens\":0,\"accepted_prediction_tokens\":0,\"rejected_prediction_tokens\":0}},\"service_tier\":\"default\",\"system_fingerprint\":\"fp_e01c6f58e1\"}",
        "model_inference.response_time_ms": "3240",
        "model_inference.system": "You are expert to create structured data make sure to give this in structured data",
        "model_inference.timestamp": "1769855715",
        "model_inference_details.cost": "0.00462",
        "model_inference_details.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference_details.inference_id": "019c139e-fa4a-7d22-9205-06bd08c3e13a",
        "model_inference_details.is_success": "true",
        "model_inference_details.model_id": "019787c1-3de1-7b50-969b-e0a58514b6a2",
        "model_inference_details.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "model_inference_details.request_arrival_time": "2026-01-31T10:35:11.818582071+00:00",
        "model_inference_details.request_forward_time": "2026-01-31T10:35:15.061042667+00:00",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "model_inference.ttft_ms": "150"
      },
      "Duration": 3243371980,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.818914963",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "5d35bb1dbb9416c2",
      "ParentSpanId": "d5721ddee1dabbbc",
      "TraceState": "",
      "SpanName": "function_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "analytics": "Some(Mutex { data: RequestAnalytics { record: GatewayAnalyticsDatabaseInsert { id: 019c139e-fa45-71b1-8623-fbd1b9765577, inference_id: None, client_ip: \"unknown\", proxy_chain: None, protocol_version: \"HTTP/1.1\", country_code: None, country_name: None, region: None, city: None, latitude: None, longitude: None, timezone: None, asn: None, isp: None, user_agent: Some(\"budprompt v.4.0\"), device_type: Some(\"desktop\"), browser_name: Some(\"Other\"), browser_version: None, os_name: Some(\"Other\"), os_version: None, is_bot: false, method: \"POST\", path: \"/v1/chat/completions\", query_params: None, request_headers: {\"accept\": \"application/json\", \"content-type\": \"application/json\"}, body_size: None, api_key_id: None, auth_method: None, user_id: None, project_id: None, endpoint_id: None, request_timestamp: 2026-01-31T10:35:11.813089125Z, response_timestamp: 2026-01-31T10:35:11.813089125Z, gateway_processing_ms: 0, total_duration_ms: 0, model_latency_ms: None, model_name: None, model_provider: None, model_version: None, routing_decision: None, status_code: 0, response_size: None, response_headers: {}, error_type: None, error_message: None, is_blocked: false, blocking_event: None, tags: {} }, start_time: Instant { tv_sec: 98179, tv_nsec: 920029171 } } })",
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "3435652",
        "episode_id": "019c139e-fa4b-7213-922a-22c65e4b0347",
        "idle_ns": "3238362115",
        "inference_id": "019c139e-fa4a-7d22-9205-06bd08c3e13a",
        "level": "INFO",
        "model_credential_store": "RwLock { data: {}, poisoned: false, .. }",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3241789602,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.819268033",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "ea9449f154875c5a",
      "ParentSpanId": "5d35bb1dbb9416c2",
      "TraceState": "",
      "SpanName": "variant_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2874072",
        "function_name": "budgateway::default",
        "idle_ns": "3238445992",
        "level": "INFO",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4"
      },
      "Duration": 3241311188,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.819409036",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "e530121f36c1ac96",
      "ParentSpanId": "ea9449f154875c5a",
      "TraceState": "",
      "SpanName": "model_chain_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2429542",
        "idle_ns": "3238649512",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3241066050,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.819474308",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "84fec8fd728350ea",
      "ParentSpanId": "e530121f36c1ac96",
      "TraceState": "",
      "SpanName": "model_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2254634",
        "idle_ns": "3238717340",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3240966434,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:11.819735847",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "576c0f937beb8bad",
      "ParentSpanId": "84fec8fd728350ea",
      "TraceState": "",
      "SpanName": "model_provider_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1804542",
        "gen_ai.operation.name": "chat",
        "gen_ai.request.model": "gpt-4.1-mini",
        "gen_ai.system": "vllm",
        "idle_ns": "3238815884",
        "level": "INFO",
        "provider_name": "vllm",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3240608154,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:15.066414335",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "20be4e9ac2300c57",
      "ParentSpanId": "bf984dcb6b71cdf9",
      "TraceState": "",
      "SpanName": "chat gpt",
      "SpanKind": "Internal",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "pydantic-ai",
      "ScopeVersion": "1.4.0",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "gen_ai.input.messages": "[{\"role\": \"system\", \"parts\": [{\"type\": \"text\", \"content\": \"You are expert to create structured data make sure to give this in structured data\"}]}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"Create a dynamic output\"}]}, {\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\"}], \"finish_reason\": \"stop\"}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"1 validation errors: [\\n  {\\n    \\\"type\\\": \\\"json_invalid\\\",\\n    \\\"loc\\\": [],\\n    \\\"msg\\\": \\\"Invalid JSON: expected value at line 1 column 1\\\",\\n    \\\"input\\\": \\\"```json\\\\n{\\\\n  \\\\\\\"response_type\\\\\\\": \\\\\\\"dynamic_output\\\\\\\",\\\\n  \\\\\\\"timestamp\\\\\\\": \\\\\\\"2024-06-27T12:00:00Z\\\\\\\",\\\\n  \\\\\\\"data\\\\\\\": {\\\\n    \\\\\\\"message\\\\\\\": \\\\\\\"This is a dynamic output generated based on the current context.\\\\\\\",\\\\n    \\\\\\\"values\\\\\\\": [\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 1,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item One\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"active\\\\\\\"\\\\n      },\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 2,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item Two\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"inactive\\\\\\\"\\\\n      }\\\\n    ]\\\\n  },\\\\n  \\\\\\\"metadata\\\\\\\": {\\\\n    \\\\\\\"generated_by\\\\\\\": \\\\\\\"structured_data_expert\\\\\\\",\\\\n    \\\\\\\"version\\\\\\\": \\\\\\\"1.0\\\\\\\"\\\\n  }\\\\n}\\\\n```\\\"\\n  }\\n]\\n\\nFix the errors and try again.\"}]}]",
        "gen_ai.operation.name": "chat",
        "gen_ai.output.messages": "[{\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\"}], \"finish_reason\": \"stop\"}]",
        "gen_ai.request.frequency_penalty": "0",
        "gen_ai.request.max_tokens": "2000",
        "gen_ai.request.model": "gpt",
        "gen_ai.request.presence_penalty": "0",
        "gen_ai.request.temperature": "0.7",
        "gen_ai.response.finish_reasons": "[\"stop\"]",
        "gen_ai.response.id": "019c139f-0785-7f23-9144-1865b7fbf334",
        "gen_ai.response.model": "gpt",
        "gen_ai.system": "openai",
        "gen_ai.usage.input_tokens": "409",
        "gen_ai.usage.output_tokens": "140",
        "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"gen_ai.input.messages\": {\"type\": \"array\"}, \"gen_ai.output.messages\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
        "model_request_parameters": "{\"function_tools\": [], \"builtin_tools\": [], \"output_mode\": \"native\", \"output_object\": {\"json_schema\": {\"properties\": {\"name\": {\"type\": \"string\"}, \"age\": {\"type\": \"integer\"}, \"country\": {\"type\": \"string\"}}, \"required\": [\"name\", \"age\", \"country\"], \"type\": \"object\", \"additionalProperties\": false}, \"name\": \"Output\", \"description\": null, \"strict\": true}, \"output_tools\": [], \"allow_text_output\": true, \"allow_image_output\": false}",
        "server.address": "localhost",
        "server.port": "56054"
      },
      "Duration": 3751195156,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:15.068757865",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "2459dc545567d4e2",
      "ParentSpanId": "20be4e9ac2300c57",
      "TraceState": "",
      "SpanName": "POST",
      "SpanKind": "Client",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "opentelemetry.instrumentation.httpx",
      "ScopeVersion": "0.60b1",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "http.method": "POST",
        "http.status_code": "200",
        "http.url": "http://localhost:56054/v1/chat/completions"
      },
      "Duration": 3746272125,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:15.069982873",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "bd34d150d9de07ea",
      "ParentSpanId": "2459dc545567d4e2",
      "TraceState": "",
      "SpanName": "gateway_analytics",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "141108945",
        "gateway_analytics.browser_name": "Other",
        "gateway_analytics.client_ip": "unknown",
        "gateway_analytics.device_type": "desktop",
        "gateway_analytics.gateway_processing_ms": "140",
        "gateway_analytics.id": "019c139f-06fe-7123-913d-77d12b84d688",
        "gateway_analytics.inference_id": "019c139f-0785-7f23-9144-1865b7fbf334",
        "gateway_analytics.is_bot": "false",
        "gateway_analytics.method": "POST",
        "gateway_analytics.os_name": "Other",
        "gateway_analytics.path": "/v1/chat/completions",
        "gateway_analytics.protocol_version": "HTTP/1.1",
        "gateway_analytics.request_headers": "{\"content-type\":\"application/json\",\"accept\":\"application/json\"}",
        "gateway_analytics.request_timestamp": "2026-01-31T10:35:15.070362382+00:00",
        "gateway_analytics.response_headers": "{\"content-type\":\"application/json\"}",
        "gateway_analytics.response_timestamp": "2026-01-31T10:35:18.813724870+00:00",
        "gateway_analytics.status_code": "200",
        "gateway_analytics.tags": "{}",
        "gateway_analytics.total_duration_ms": "3743",
        "gateway_analytics.user_agent": "budprompt v.4.0",
        "idle_ns": "3603132867",
        "level": "INFO",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc"
      },
      "Duration": 3744222285,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:15.202756489",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "daebe5c3d3794444",
      "ParentSpanId": "bd34d150d9de07ea",
      "TraceState": "",
      "SpanName": "POST /v1/chat/completions",
      "SpanKind": "Server",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "7797925",
        "http.request.method": "POST",
        "http.route": "/v1/chat/completions",
        "idle_ns": "3603759096",
        "level": "INFO",
        "network.protocol.version": "1.1",
        "server.address": "localhost:56054",
        "span.type": "web",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker",
        "url.path": "/v1/chat/completions",
        "url.scheme": "",
        "user_agent.original": "budprompt v.4.0"
      },
      "Duration": 3611543466,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:15.204542067",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "f721a49ab3cc340b",
      "ParentSpanId": "daebe5c3d3794444",
      "TraceState": "",
      "SpanName": "inference_handler_observability",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "6003551",
        "chat_inference.episode_id": "019c139f-0785-7f23-9144-187c7e65ae93",
        "chat_inference.extra_body": "[]",
        "chat_inference.function_name": "budgateway::default",
        "chat_inference.id": "019c139f-0785-7f23-9144-1865b7fbf334",
        "chat_inference.inference_params": "{\"chat_completion\":{\"temperature\":0.7,\"max_tokens\":2000,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"json_mode\":\"strict\"}}",
        "chat_inference.input": "{\"system\":\"You are expert to create structured data make sure to give this in structured data\",\"messages\":[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"value\":\"Create a dynamic output\"}]},{\"role\":\"assistant\",\"content\":[{\"type\":\"text\",\"value\":\"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\"}]},{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"value\":\"1 validation errors: [\\n  {\\n    \\\"type\\\": \\\"json_invalid\\\",\\n    \\\"loc\\\": [],\\n    \\\"msg\\\": \\\"Invalid JSON: expected value at line 1 column 1\\\",\\n    \\\"input\\\": \\\"```json\\\\n{\\\\n  \\\\\\\"response_type\\\\\\\": \\\\\\\"dynamic_output\\\\\\\",\\\\n  \\\\\\\"timestamp\\\\\\\": \\\\\\\"2024-06-27T12:00:00Z\\\\\\\",\\\\n  \\\\\\\"data\\\\\\\": {\\\\n    \\\\\\\"message\\\\\\\": \\\\\\\"This is a dynamic output generated based on the current context.\\\\\\\",\\\\n    \\\\\\\"values\\\\\\\": [\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 1,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item One\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"active\\\\\\\"\\\\n      },\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 2,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item Two\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"inactive\\\\\\\"\\\\n      }\\\\n    ]\\\\n  },\\\\n  \\\\\\\"metadata\\\\\\\": {\\\\n    \\\\\\\"generated_by\\\\\\\": \\\\\\\"structured_data_expert\\\\\\\",\\\\n    \\\\\\\"version\\\\\\\": \\\\\\\"1.0\\\\\\\"\\\\n  }\\\\n}\\\\n```\\\"\\n  }\\n]\\n\\nFix the errors and try again.\"}]}]}",
        "chat_inference.output": "[{\"type\":\"text\",\"text\":\"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\"}]",
        "chat_inference.processing_time_ms": "3605",
        "chat_inference.tags": "{}",
        "chat_inference.variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "idle_ns": "3602869474",
        "level": "INFO",
        "model_inference.cached": "false",
        "model_inference.endpoint_type": "chat",
        "model_inference.finish_reason": "stop",
        "model_inference.gateway_request": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are expert to create structured data make sure to give this in structured data\"},{\"role\":\"user\",\"content\":\"Create a dynamic output\"},{\"role\":\"assistant\",\"content\":\"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\"},{\"role\":\"user\",\"content\":\"1 validation errors: [\\n  {\\n    \\\"type\\\": \\\"json_invalid\\\",\\n    \\\"loc\\\": [],\\n    \\\"msg\\\": \\\"Invalid JSON: expected value at line 1 column 1\\\",\\n    \\\"input\\\": \\\"```json\\\\n{\\\\n  \\\\\\\"response_type\\\\\\\": \\\\\\\"dynamic_output\\\\\\\",\\\\n  \\\\\\\"timestamp\\\\\\\": \\\\\\\"2024-06-27T12:00:00Z\\\\\\\",\\\\n  \\\\\\\"data\\\\\\\": {\\\\n    \\\\\\\"message\\\\\\\": \\\\\\\"This is a dynamic output generated based on the current context.\\\\\\\",\\\\n    \\\\\\\"values\\\\\\\": [\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 1,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item One\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"active\\\\\\\"\\\\n      },\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 2,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item Two\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"inactive\\\\\\\"\\\\n      }\\\\n    ]\\\\n  },\\\\n  \\\\\\\"metadata\\\\\\\": {\\\\n    \\\\\\\"generated_by\\\\\\\": \\\\\\\"structured_data_expert\\\\\\\",\\\\n    \\\\\\\"version\\\\\\\": \\\\\\\"1.0\\\\\\\"\\\\n  }\\\\n}\\\\n```\\\"\\n  }\\n]\\n\\nFix the errors and try again.\"}],\"model\":\"gpt-4.1-mini\",\"temperature\":0.699999988079071,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"max_tokens\":2000,\"stream\":false,\"guided_json\":{\"properties\":{\"name\":{\"type\":\"string\"},\"age\":{\"type\":\"integer\"},\"country\":{\"type\":\"string\"}},\"required\":[\"name\",\"age\",\"country\"],\"type\":\"object\",\"additionalProperties\":false},\"logprobs\":false}",
        "model_inference.gateway_response": "{\"id\":\"chatcmpl-D42bs3UfadQZ12eclh5ozOvg1RteJ\",\"object\":\"chat.completion\",\"created\":1769855716,\"model\":\"gpt-4.1-mini-2025-04-14\",\"choices\":[{\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\",\"refusal\":null,\"annotations\":[]},\"logprobs\":null,\"finish_reason\":\"stop\"}],\"usage\":{\"prompt_tokens\":409,\"completion_tokens\":140,\"total_tokens\":549,\"prompt_tokens_details\":{\"cached_tokens\":0,\"audio_tokens\":0},\"completion_tokens_details\":{\"reasoning_tokens\":0,\"audio_tokens\":0,\"accepted_prediction_tokens\":0,\"rejected_prediction_tokens\":0}},\"service_tier\":\"default\",\"system_fingerprint\":\"fp_e01c6f58e1\"}",
        "model_inference.id": "019c139f-159a-7952-83cd-c2be588840d3",
        "model_inference.inference_id": "019c139f-0785-7f23-9144-1865b7fbf334",
        "model_inference.input_messages": "[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"Create a dynamic output\"}]},{\"role\":\"assistant\",\"content\":[{\"type\":\"text\",\"text\":\"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\"}]},{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"1 validation errors: [\\n  {\\n    \\\"type\\\": \\\"json_invalid\\\",\\n    \\\"loc\\\": [],\\n    \\\"msg\\\": \\\"Invalid JSON: expected value at line 1 column 1\\\",\\n    \\\"input\\\": \\\"```json\\\\n{\\\\n  \\\\\\\"response_type\\\\\\\": \\\\\\\"dynamic_output\\\\\\\",\\\\n  \\\\\\\"timestamp\\\\\\\": \\\\\\\"2024-06-27T12:00:00Z\\\\\\\",\\\\n  \\\\\\\"data\\\\\\\": {\\\\n    \\\\\\\"message\\\\\\\": \\\\\\\"This is a dynamic output generated based on the current context.\\\\\\\",\\\\n    \\\\\\\"values\\\\\\\": [\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 1,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item One\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"active\\\\\\\"\\\\n      },\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 2,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item Two\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"inactive\\\\\\\"\\\\n      }\\\\n    ]\\\\n  },\\\\n  \\\\\\\"metadata\\\\\\\": {\\\\n    \\\\\\\"generated_by\\\\\\\": \\\\\\\"structured_data_expert\\\\\\\",\\\\n    \\\\\\\"version\\\\\\\": \\\\\\\"1.0\\\\\\\"\\\\n  }\\\\n}\\\\n```\\\"\\n  }\\n]\\n\\nFix the errors and try again.\"}]}]",
        "model_inference.input_tokens": "409",
        "model_inference.model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference.model_provider_name": "vllm",
        "model_inference.output": "[{\"type\":\"text\",\"text\":\"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\"}]",
        "model_inference.output_tokens": "140",
        "model_inference.raw_request": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are expert to create structured data make sure to give this in structured data\"},{\"role\":\"user\",\"content\":\"Create a dynamic output\"},{\"role\":\"assistant\",\"content\":\"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\"},{\"role\":\"user\",\"content\":\"1 validation errors: [\\n  {\\n    \\\"type\\\": \\\"json_invalid\\\",\\n    \\\"loc\\\": [],\\n    \\\"msg\\\": \\\"Invalid JSON: expected value at line 1 column 1\\\",\\n    \\\"input\\\": \\\"```json\\\\n{\\\\n  \\\\\\\"response_type\\\\\\\": \\\\\\\"dynamic_output\\\\\\\",\\\\n  \\\\\\\"timestamp\\\\\\\": \\\\\\\"2024-06-27T12:00:00Z\\\\\\\",\\\\n  \\\\\\\"data\\\\\\\": {\\\\n    \\\\\\\"message\\\\\\\": \\\\\\\"This is a dynamic output generated based on the current context.\\\\\\\",\\\\n    \\\\\\\"values\\\\\\\": [\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 1,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item One\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"active\\\\\\\"\\\\n      },\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 2,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item Two\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"inactive\\\\\\\"\\\\n      }\\\\n    ]\\\\n  },\\\\n  \\\\\\\"metadata\\\\\\\": {\\\\n    \\\\\\\"generated_by\\\\\\\": \\\\\\\"structured_data_expert\\\\\\\",\\\\n    \\\\\\\"version\\\\\\\": \\\\\\\"1.0\\\\\\\"\\\\n  }\\\\n}\\\\n```\\\"\\n  }\\n]\\n\\nFix the errors and try again.\"}],\"model\":\"gpt-4.1-mini\",\"temperature\":0.699999988079071,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"max_tokens\":2000,\"stream\":false,\"guided_json\":{\"properties\":{\"name\":{\"type\":\"string\"},\"age\":{\"type\":\"integer\"},\"country\":{\"type\":\"string\"}},\"required\":[\"name\",\"age\",\"country\"],\"type\":\"object\",\"additionalProperties\":false},\"logprobs\":false}",
        "model_inference.raw_response": "{\"id\":\"chatcmpl-D42bs3UfadQZ12eclh5ozOvg1RteJ\",\"object\":\"chat.completion\",\"created\":1769855716,\"model\":\"gpt-4.1-mini-2025-04-14\",\"choices\":[{\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\",\"refusal\":null,\"annotations\":[]},\"logprobs\":null,\"finish_reason\":\"stop\"}],\"usage\":{\"prompt_tokens\":409,\"completion_tokens\":140,\"total_tokens\":549,\"prompt_tokens_details\":{\"cached_tokens\":0,\"audio_tokens\":0},\"completion_tokens_details\":{\"reasoning_tokens\":0,\"audio_tokens\":0,\"accepted_prediction_tokens\":0,\"rejected_prediction_tokens\":0}},\"service_tier\":\"default\",\"system_fingerprint\":\"fp_e01c6f58e1\"}",
        "model_inference.response_time_ms": "3603",
        "model_inference.system": "You are expert to create structured data make sure to give this in structured data",
        "model_inference.timestamp": "1769855718",
        "model_inference_details.cost": "0.00829",
        "model_inference_details.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference_details.inference_id": "019c139f-0785-7f23-9144-1865b7fbf334",
        "model_inference_details.is_success": "true",
        "model_inference_details.model_id": "019787c1-3de1-7b50-969b-e0a58514b6a2",
        "model_inference_details.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "model_inference_details.request_arrival_time": "2026-01-31T10:35:15.204686306+00:00",
        "model_inference_details.request_forward_time": "2026-01-31T10:35:18.812326507+00:00",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker",
        "model_inference.ttft_ms": "180"
      },
      "Duration": 3608858107,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:15.205548838",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "109041063ce3653c",
      "ParentSpanId": "f721a49ab3cc340b",
      "TraceState": "",
      "SpanName": "function_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "analytics": "Some(Mutex { data: RequestAnalytics { record: GatewayAnalyticsDatabaseInsert { id: 019c139f-06fe-7123-913d-77d12b84d688, inference_id: None, client_ip: \"unknown\", proxy_chain: None, protocol_version: \"HTTP/1.1\", country_code: None, country_name: None, region: None, city: None, latitude: None, longitude: None, timezone: None, asn: None, isp: None, user_agent: Some(\"budprompt v.4.0\"), device_type: Some(\"desktop\"), browser_name: Some(\"Other\"), browser_version: None, os_name: Some(\"Other\"), os_version: None, is_bot: false, method: \"POST\", path: \"/v1/chat/completions\", query_params: None, request_headers: {\"content-type\": \"application/json\", \"accept\": \"application/json\"}, body_size: None, api_key_id: None, auth_method: None, user_id: None, project_id: None, endpoint_id: None, request_timestamp: 2026-01-31T10:35:15.070362382Z, response_timestamp: 2026-01-31T10:35:15.070362382Z, gateway_processing_ms: 0, total_duration_ms: 0, model_latency_ms: None, model_name: None, model_provider: None, model_version: None, routing_decision: None, status_code: 0, response_size: None, response_headers: {}, error_type: None, error_message: None, is_blocked: false, blocking_event: None, tags: {} }, start_time: Instant { tv_sec: 98183, tv_nsec: 177299242 } } })",
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "3553633",
        "episode_id": "019c139f-0785-7f23-9144-187c7e65ae93",
        "idle_ns": "3602488732",
        "inference_id": "019c139f-0785-7f23-9144-1865b7fbf334",
        "level": "INFO",
        "model_credential_store": "RwLock { data: {}, poisoned: false, .. }",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3605972745,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:15.206242705",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "89b91b94f3df02ba",
      "ParentSpanId": "109041063ce3653c",
      "TraceState": "",
      "SpanName": "variant_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2752494",
        "function_name": "budgateway::default",
        "idle_ns": "3602381774",
        "level": "INFO",
        "stream": "false",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker",
        "variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4"
      },
      "Duration": 3605118708,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:15.206506368",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "88e73dcca59b7a68",
      "ParentSpanId": "89b91b94f3df02ba",
      "TraceState": "",
      "SpanName": "model_chain_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2326899",
        "idle_ns": "3602399936",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3604714743,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:15.206601846",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "f48aecd341869fd5",
      "ParentSpanId": "88e73dcca59b7a68",
      "TraceState": "",
      "SpanName": "model_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2159115",
        "idle_ns": "3602413563",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3604565444,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:15.207021951",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "1a845cd860d83878",
      "ParentSpanId": "f48aecd341869fd5",
      "TraceState": "",
      "SpanName": "model_provider_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1526592",
        "gen_ai.operation.name": "chat",
        "gen_ai.request.model": "gpt-4.1-mini",
        "gen_ai.system": "vllm",
        "idle_ns": "3602468837",
        "level": "INFO",
        "provider_name": "vllm",
        "stream": "false",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3603982866,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:18.818503693",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "2dc40533b92c7b27",
      "ParentSpanId": "bf984dcb6b71cdf9",
      "TraceState": "",
      "SpanName": "chat gpt",
      "SpanKind": "Internal",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "pydantic-ai",
      "ScopeVersion": "1.4.0",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "gen_ai.input.messages": "[{\"role\": \"system\", \"parts\": [{\"type\": \"text\", \"content\": \"You are expert to create structured data make sure to give this in structured data\"}]}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"Create a dynamic output\"}]}, {\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\"}], \"finish_reason\": \"stop\"}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"1 validation errors: [\\n  {\\n    \\\"type\\\": \\\"json_invalid\\\",\\n    \\\"loc\\\": [],\\n    \\\"msg\\\": \\\"Invalid JSON: expected value at line 1 column 1\\\",\\n    \\\"input\\\": \\\"```json\\\\n{\\\\n  \\\\\\\"response_type\\\\\\\": \\\\\\\"dynamic_output\\\\\\\",\\\\n  \\\\\\\"timestamp\\\\\\\": \\\\\\\"2024-06-27T12:00:00Z\\\\\\\",\\\\n  \\\\\\\"data\\\\\\\": {\\\\n    \\\\\\\"message\\\\\\\": \\\\\\\"This is a dynamic output generated based on the current context.\\\\\\\",\\\\n    \\\\\\\"values\\\\\\\": [\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 1,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item One\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"active\\\\\\\"\\\\n      },\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 2,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item Two\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"inactive\\\\\\\"\\\\n      }\\\\n    ]\\\\n  },\\\\n  \\\\\\\"metadata\\\\\\\": {\\\\n    \\\\\\\"generated_by\\\\\\\": \\\\\\\"structured_data_expert\\\\\\\",\\\\n    \\\\\\\"version\\\\\\\": \\\\\\\"1.0\\\\\\\"\\\\n  }\\\\n}\\\\n```\\\"\\n  }\\n]\\n\\nFix the errors and try again.\"}]}, {\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\"}], \"finish_reason\": \"stop\"}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"3 validation errors: [\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"name\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"age\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"country\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  }\\n]\\n\\nFix the errors and try again.\"}]}]",
        "gen_ai.operation.name": "chat",
        "gen_ai.output.messages": "[{\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"name\\\": \\\"Sample Response\\\",\\n  \\\"age\\\": 30,\\n  \\\"country\\\": \\\"USA\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\"}], \"finish_reason\": \"stop\"}]",
        "gen_ai.request.frequency_penalty": "0",
        "gen_ai.request.max_tokens": "2000",
        "gen_ai.request.model": "gpt",
        "gen_ai.request.presence_penalty": "0",
        "gen_ai.request.temperature": "0.7",
        "gen_ai.response.finish_reasons": "[\"stop\"]",
        "gen_ai.response.id": "019c139f-15ae-7633-b10e-c2eb3e8484be",
        "gen_ai.response.model": "gpt",
        "gen_ai.system": "openai",
        "gen_ai.usage.input_tokens": "1095",
        "gen_ai.usage.output_tokens": "162",
        "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"gen_ai.input.messages\": {\"type\": \"array\"}, \"gen_ai.output.messages\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
        "model_request_parameters": "{\"function_tools\": [], \"builtin_tools\": [], \"output_mode\": \"native\", \"output_object\": {\"json_schema\": {\"properties\": {\"name\": {\"type\": \"string\"}, \"age\": {\"type\": \"integer\"}, \"country\": {\"type\": \"string\"}}, \"required\": [\"name\", \"age\", \"country\"], \"type\": \"object\", \"additionalProperties\": false}, \"name\": \"Output\", \"description\": null, \"strict\": true}, \"output_tools\": [], \"allow_text_output\": true, \"allow_image_output\": false}",
        "server.address": "localhost",
        "server.port": "56054"
      },
      "Duration": 3525135298,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:18.821605499",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "0a48d3ae167fe06f",
      "ParentSpanId": "2dc40533b92c7b27",
      "TraceState": "",
      "SpanName": "POST",
      "SpanKind": "Client",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "opentelemetry.instrumentation.httpx",
      "ScopeVersion": "0.60b1",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "http.method": "POST",
        "http.status_code": "200",
        "http.url": "http://localhost:56054/v1/chat/completions"
      },
      "Duration": 3519682468,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:18.822844555",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "d5e668c7ac01d75e",
      "ParentSpanId": "0a48d3ae167fe06f",
      "TraceState": "",
      "SpanName": "gateway_analytics",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "12076061",
        "gateway_analytics.browser_name": "Other",
        "gateway_analytics.client_ip": "unknown",
        "gateway_analytics.device_type": "desktop",
        "gateway_analytics.gateway_processing_ms": "11",
        "gateway_analytics.id": "019c139f-15a7-7852-b6da-ace6c8ffc78f",
        "gateway_analytics.inference_id": "019c139f-15ae-7633-b10e-c2eb3e8484be",
        "gateway_analytics.is_bot": "false",
        "gateway_analytics.method": "POST",
        "gateway_analytics.os_name": "Other",
        "gateway_analytics.path": "/v1/chat/completions",
        "gateway_analytics.protocol_version": "HTTP/1.1",
        "gateway_analytics.request_headers": "{\"accept\":\"application/json\",\"content-type\":\"application/json\"}",
        "gateway_analytics.request_timestamp": "2026-01-31T10:35:18.823040541+00:00",
        "gateway_analytics.response_headers": "{\"content-type\":\"application/json\"}",
        "gateway_analytics.response_timestamp": "2026-01-31T10:35:22.340126319+00:00",
        "gateway_analytics.status_code": "200",
        "gateway_analytics.tags": "{}",
        "gateway_analytics.total_duration_ms": "3517",
        "gateway_analytics.user_agent": "budprompt v.4.0",
        "idle_ns": "3505676302",
        "level": "INFO",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc"
      },
      "Duration": 3517743857,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:18.827513411",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "1fe8399423dfb4ab",
      "ParentSpanId": "d5e668c7ac01d75e",
      "TraceState": "",
      "SpanName": "POST /v1/chat/completions",
      "SpanKind": "Server",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "6700350",
        "http.request.method": "POST",
        "http.route": "/v1/chat/completions",
        "idle_ns": "3506474889",
        "level": "INFO",
        "network.protocol.version": "1.1",
        "server.address": "localhost:56054",
        "span.type": "web",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "url.path": "/v1/chat/completions",
        "url.scheme": "",
        "user_agent.original": "budprompt v.4.0"
      },
      "Duration": 3513156854,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:18.829063778",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "710034efa5f937c0",
      "ParentSpanId": "1fe8399423dfb4ab",
      "TraceState": "",
      "SpanName": "inference_handler_observability",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "5034077",
        "chat_inference.episode_id": "019c139f-15ae-7633-b10e-c2f2101e41c4",
        "chat_inference.extra_body": "[]",
        "chat_inference.function_name": "budgateway::default",
        "chat_inference.id": "019c139f-15ae-7633-b10e-c2eb3e8484be",
        "chat_inference.inference_params": "{\"chat_completion\":{\"temperature\":0.7,\"max_tokens\":2000,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"json_mode\":\"strict\"}}",
        "chat_inference.input": "{\"system\":\"You are expert to create structured data make sure to give this in structured data\",\"messages\":[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"value\":\"Create a dynamic output\"}]},{\"role\":\"assistant\",\"content\":[{\"type\":\"text\",\"value\":\"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\"}]},{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"value\":\"1 validation errors: [\\n  {\\n    \\\"type\\\": \\\"json_invalid\\\",\\n    \\\"loc\\\": [],\\n    \\\"msg\\\": \\\"Invalid JSON: expected value at line 1 column 1\\\",\\n    \\\"input\\\": \\\"```json\\\\n{\\\\n  \\\\\\\"response_type\\\\\\\": \\\\\\\"dynamic_output\\\\\\\",\\\\n  \\\\\\\"timestamp\\\\\\\": \\\\\\\"2024-06-27T12:00:00Z\\\\\\\",\\\\n  \\\\\\\"data\\\\\\\": {\\\\n    \\\\\\\"message\\\\\\\": \\\\\\\"This is a dynamic output generated based on the current context.\\\\\\\",\\\\n    \\\\\\\"values\\\\\\\": [\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 1,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item One\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"active\\\\\\\"\\\\n      },\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 2,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item Two\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"inactive\\\\\\\"\\\\n      }\\\\n    ]\\\\n  },\\\\n  \\\\\\\"metadata\\\\\\\": {\\\\n    \\\\\\\"generated_by\\\\\\\": \\\\\\\"structured_data_expert\\\\\\\",\\\\n    \\\\\\\"version\\\\\\\": \\\\\\\"1.0\\\\\\\"\\\\n  }\\\\n}\\\\n```\\\"\\n  }\\n]\\n\\nFix the errors and try again.\"}]},{\"role\":\"assistant\",\"content\":[{\"type\":\"text\",\"value\":\"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\"}]},{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"value\":\"3 validation errors: [\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"name\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"age\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"country\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  }\\n]\\n\\nFix the errors and try again.\"}]}]}",
        "chat_inference.output": "[{\"type\":\"text\",\"text\":\"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"name\\\": \\\"Sample Response\\\",\\n  \\\"age\\\": 30,\\n  \\\"country\\\": \\\"USA\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\"}]",
        "chat_inference.processing_time_ms": "3507",
        "chat_inference.tags": "{}",
        "chat_inference.variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "idle_ns": "3505646810",
        "level": "INFO",
        "model_inference.cached": "false",
        "model_inference.endpoint_type": "chat",
        "model_inference.finish_reason": "stop",
        "model_inference.gateway_request": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are expert to create structured data make sure to give this in structured data\"},{\"role\":\"user\",\"content\":\"Create a dynamic output\"},{\"role\":\"assistant\",\"content\":\"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\"},{\"role\":\"user\",\"content\":\"1 validation errors: [\\n  {\\n    \\\"type\\\": \\\"json_invalid\\\",\\n    \\\"loc\\\": [],\\n    \\\"msg\\\": \\\"Invalid JSON: expected value at line 1 column 1\\\",\\n    \\\"input\\\": \\\"```json\\\\n{\\\\n  \\\\\\\"response_type\\\\\\\": \\\\\\\"dynamic_output\\\\\\\",\\\\n  \\\\\\\"timestamp\\\\\\\": \\\\\\\"2024-06-27T12:00:00Z\\\\\\\",\\\\n  \\\\\\\"data\\\\\\\": {\\\\n    \\\\\\\"message\\\\\\\": \\\\\\\"This is a dynamic output generated based on the current context.\\\\\\\",\\\\n    \\\\\\\"values\\\\\\\": [\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 1,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item One\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"active\\\\\\\"\\\\n      },\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 2,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item Two\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"inactive\\\\\\\"\\\\n      }\\\\n    ]\\\\n  },\\\\n  \\\\\\\"metadata\\\\\\\": {\\\\n    \\\\\\\"generated_by\\\\\\\": \\\\\\\"structured_data_expert\\\\\\\",\\\\n    \\\\\\\"version\\\\\\\": \\\\\\\"1.0\\\\\\\"\\\\n  }\\\\n}\\\\n```\\\"\\n  }\\n]\\n\\nFix the errors and try again.\"},{\"role\":\"assistant\",\"content\":\"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\"},{\"role\":\"user\",\"content\":\"3 validation errors: [\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"name\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"age\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"country\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  }\\n]\\n\\nFix the errors and try again.\"}],\"model\":\"gpt-4.1-mini\",\"temperature\":0.699999988079071,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"max_tokens\":2000,\"stream\":false,\"guided_json\":{\"properties\":{\"name\":{\"type\":\"string\"},\"age\":{\"type\":\"integer\"},\"country\":{\"type\":\"string\"}},\"required\":[\"name\",\"age\",\"country\"],\"type\":\"object\",\"additionalProperties\":false},\"logprobs\":false}",
        "model_inference.gateway_response": "{\"id\":\"chatcmpl-D42bvv8Y3rYppkejhEVegRao5zzKZ\",\"object\":\"chat.completion\",\"created\":1769855719,\"model\":\"gpt-4.1-mini-2025-04-14\",\"choices\":[{\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"name\\\": \\\"Sample Response\\\",\\n  \\\"age\\\": 30,\\n  \\\"country\\\": \\\"USA\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\",\"refusal\":null,\"annotations\":[]},\"logprobs\":null,\"finish_reason\":\"stop\"}],\"usage\":{\"prompt_tokens\":1095,\"completion_tokens\":162,\"total_tokens\":1257,\"prompt_tokens_details\":{\"cached_tokens\":0,\"audio_tokens\":0},\"completion_tokens_details\":{\"reasoning_tokens\":0,\"audio_tokens\":0,\"accepted_prediction_tokens\":0,\"rejected_prediction_tokens\":0}},\"service_tier\":\"default\",\"system_fingerprint\":\"fp_e01c6f58e1\"}",
        "model_inference.id": "019c139f-2361-7ca1-80e8-fa73642c2bba",
        "model_inference.inference_id": "019c139f-15ae-7633-b10e-c2eb3e8484be",
        "model_inference.input_messages": "[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"Create a dynamic output\"}]},{\"role\":\"assistant\",\"content\":[{\"type\":\"text\",\"text\":\"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\"}]},{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"1 validation errors: [\\n  {\\n    \\\"type\\\": \\\"json_invalid\\\",\\n    \\\"loc\\\": [],\\n    \\\"msg\\\": \\\"Invalid JSON: expected value at line 1 column 1\\\",\\n    \\\"input\\\": \\\"```json\\\\n{\\\\n  \\\\\\\"response_type\\\\\\\": \\\\\\\"dynamic_output\\\\\\\",\\\\n  \\\\\\\"timestamp\\\\\\\": \\\\\\\"2024-06-27T12:00:00Z\\\\\\\",\\\\n  \\\\\\\"data\\\\\\\": {\\\\n    \\\\\\\"message\\\\\\\": \\\\\\\"This is a dynamic output generated based on the current context.\\\\\\\",\\\\n    \\\\\\\"values\\\\\\\": [\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 1,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item One\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"active\\\\\\\"\\\\n      },\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 2,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item Two\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"inactive\\\\\\\"\\\\n      }\\\\n    ]\\\\n  },\\\\n  \\\\\\\"metadata\\\\\\\": {\\\\n    \\\\\\\"generated_by\\\\\\\": \\\\\\\"structured_data_expert\\\\\\\",\\\\n    \\\\\\\"version\\\\\\\": \\\\\\\"1.0\\\\\\\"\\\\n  }\\\\n}\\\\n```\\\"\\n  }\\n]\\n\\nFix the errors and try again.\"}]},{\"role\":\"assistant\",\"content\":[{\"type\":\"text\",\"text\":\"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\"}]},{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"3 validation errors: [\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"name\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"age\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"country\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  }\\n]\\n\\nFix the errors and try again.\"}]}]",
        "model_inference.input_tokens": "1095",
        "model_inference.model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference.model_provider_name": "vllm",
        "model_inference.output": "[{\"type\":\"text\",\"text\":\"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"name\\\": \\\"Sample Response\\\",\\n  \\\"age\\\": 30,\\n  \\\"country\\\": \\\"USA\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\"}]",
        "model_inference.output_tokens": "162",
        "model_inference.raw_request": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are expert to create structured data make sure to give this in structured data\"},{\"role\":\"user\",\"content\":\"Create a dynamic output\"},{\"role\":\"assistant\",\"content\":\"```json\\n{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\\n```\"},{\"role\":\"user\",\"content\":\"1 validation errors: [\\n  {\\n    \\\"type\\\": \\\"json_invalid\\\",\\n    \\\"loc\\\": [],\\n    \\\"msg\\\": \\\"Invalid JSON: expected value at line 1 column 1\\\",\\n    \\\"input\\\": \\\"```json\\\\n{\\\\n  \\\\\\\"response_type\\\\\\\": \\\\\\\"dynamic_output\\\\\\\",\\\\n  \\\\\\\"timestamp\\\\\\\": \\\\\\\"2024-06-27T12:00:00Z\\\\\\\",\\\\n  \\\\\\\"data\\\\\\\": {\\\\n    \\\\\\\"message\\\\\\\": \\\\\\\"This is a dynamic output generated based on the current context.\\\\\\\",\\\\n    \\\\\\\"values\\\\\\\": [\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 1,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item One\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"active\\\\\\\"\\\\n      },\\\\n      {\\\\n        \\\\\\\"id\\\\\\\": 2,\\\\n        \\\\\\\"name\\\\\\\": \\\\\\\"Item Two\\\\\\\",\\\\n        \\\\\\\"status\\\\\\\": \\\\\\\"inactive\\\\\\\"\\\\n      }\\\\n    ]\\\\n  },\\\\n  \\\\\\\"metadata\\\\\\\": {\\\\n    \\\\\\\"generated_by\\\\\\\": \\\\\\\"structured_data_expert\\\\\\\",\\\\n    \\\\\\\"version\\\\\\\": \\\\\\\"1.0\\\\\\\"\\\\n  }\\\\n}\\\\n```\\\"\\n  }\\n]\\n\\nFix the errors and try again.\"},{\"role\":\"assistant\",\"content\":\"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\"},{\"role\":\"user\",\"content\":\"3 validation errors: [\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"name\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"age\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"country\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"response_type\\\": \\\"dynamic_output\\\",\\n      \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n      \\\"data\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n        \\\"values\\\": [\\n          {\\n            \\\"id\\\": 1,\\n            \\\"name\\\": \\\"Item One\\\",\\n            \\\"status\\\": \\\"active\\\"\\n          },\\n          {\\n            \\\"id\\\": 2,\\n            \\\"name\\\": \\\"Item Two\\\",\\n            \\\"status\\\": \\\"inactive\\\"\\n          }\\n        ]\\n      },\\n      \\\"metadata\\\": {\\n        \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n        \\\"version\\\": \\\"1.0\\\"\\n      }\\n    }\\n  }\\n]\\n\\nFix the errors and try again.\"}],\"model\":\"gpt-4.1-mini\",\"temperature\":0.699999988079071,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"max_tokens\":2000,\"stream\":false,\"guided_json\":{\"properties\":{\"name\":{\"type\":\"string\"},\"age\":{\"type\":\"integer\"},\"country\":{\"type\":\"string\"}},\"required\":[\"name\",\"age\",\"country\"],\"type\":\"object\",\"additionalProperties\":false},\"logprobs\":false}",
        "model_inference.raw_response": "{\"id\":\"chatcmpl-D42bvv8Y3rYppkejhEVegRao5zzKZ\",\"object\":\"chat.completion\",\"created\":1769855719,\"model\":\"gpt-4.1-mini-2025-04-14\",\"choices\":[{\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"{\\n  \\\"response_type\\\": \\\"dynamic_output\\\",\\n  \\\"timestamp\\\": \\\"2024-06-27T12:00:00Z\\\",\\n  \\\"name\\\": \\\"Sample Response\\\",\\n  \\\"age\\\": 30,\\n  \\\"country\\\": \\\"USA\\\",\\n  \\\"data\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on the current context.\\\",\\n    \\\"values\\\": [\\n      {\\n        \\\"id\\\": 1,\\n        \\\"name\\\": \\\"Item One\\\",\\n        \\\"status\\\": \\\"active\\\"\\n      },\\n      {\\n        \\\"id\\\": 2,\\n        \\\"name\\\": \\\"Item Two\\\",\\n        \\\"status\\\": \\\"inactive\\\"\\n      }\\n    ]\\n  },\\n  \\\"metadata\\\": {\\n    \\\"generated_by\\\": \\\"structured_data_expert\\\",\\n    \\\"version\\\": \\\"1.0\\\"\\n  }\\n}\",\"refusal\":null,\"annotations\":[]},\"logprobs\":null,\"finish_reason\":\"stop\"}],\"usage\":{\"prompt_tokens\":1095,\"completion_tokens\":162,\"total_tokens\":1257,\"prompt_tokens_details\":{\"cached_tokens\":0,\"audio_tokens\":0},\"completion_tokens_details\":{\"reasoning_tokens\":0,\"audio_tokens\":0,\"accepted_prediction_tokens\":0,\"rejected_prediction_tokens\":0}},\"service_tier\":\"default\",\"system_fingerprint\":\"fp_e01c6f58e1\"}",
        "model_inference.response_time_ms": "3506",
        "model_inference.system": "You are expert to create structured data make sure to give this in structured data",
        "model_inference.timestamp": "1769855722",
        "model_inference_details.cost": "0.01581",
        "model_inference_details.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference_details.inference_id": "019c139f-15ae-7633-b10e-c2eb3e8484be",
        "model_inference_details.is_success": "true",
        "model_inference_details.model_id": "019787c1-3de1-7b50-969b-e0a58514b6a2",
        "model_inference_details.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "model_inference_details.request_arrival_time": "2026-01-31T10:35:18.829127708+00:00",
        "model_inference_details.request_forward_time": "2026-01-31T10:35:22.338710663+00:00",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "model_inference.ttft_ms": "200"
      },
      "Duration": 3510670368,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:18.829952379",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "9dea08b57461fedd",
      "ParentSpanId": "710034efa5f937c0",
      "TraceState": "",
      "SpanName": "function_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "analytics": "Some(Mutex { data: RequestAnalytics { record: GatewayAnalyticsDatabaseInsert { id: 019c139f-15a7-7852-b6da-ace6c8ffc78f, inference_id: None, client_ip: \"unknown\", proxy_chain: None, protocol_version: \"HTTP/1.1\", country_code: None, country_name: None, region: None, city: None, latitude: None, longitude: None, timezone: None, asn: None, isp: None, user_agent: Some(\"budprompt v.4.0\"), device_type: Some(\"desktop\"), browser_name: Some(\"Other\"), browser_version: None, os_name: Some(\"Other\"), os_version: None, is_bot: false, method: \"POST\", path: \"/v1/chat/completions\", query_params: None, request_headers: {\"accept\": \"application/json\", \"content-type\": \"application/json\"}, body_size: None, api_key_id: None, auth_method: None, user_id: None, project_id: None, endpoint_id: None, request_timestamp: 2026-01-31T10:35:18.823040541Z, response_timestamp: 2026-01-31T10:35:18.823040541Z, gateway_processing_ms: 0, total_duration_ms: 0, model_latency_ms: None, model_name: None, model_provider: None, model_version: None, routing_decision: None, status_code: 0, response_size: None, response_headers: {}, error_type: None, error_message: None, is_blocked: false, blocking_event: None, tags: {} }, start_time: Instant { tv_sec: 98186, tv_nsec: 929978243 } } })",
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2916722",
        "episode_id": "019c139f-15ae-7633-b10e-c2f2101e41c4",
        "idle_ns": "3505045343",
        "inference_id": "019c139f-15ae-7633-b10e-c2eb3e8484be",
        "level": "INFO",
        "model_credential_store": "RwLock { data: {}, poisoned: false, .. }",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3507952568,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:18.830310428",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "fa8794540c0e6dfd",
      "ParentSpanId": "9dea08b57461fedd",
      "TraceState": "",
      "SpanName": "variant_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2437845",
        "function_name": "budgateway::default",
        "idle_ns": "3505023164",
        "level": "INFO",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4"
      },
      "Duration": 3507452463,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:18.830416727",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "19befa0011a4f293",
      "ParentSpanId": "fa8794540c0e6dfd",
      "TraceState": "",
      "SpanName": "model_chain_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2192006",
        "idle_ns": "3505037581",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3507223105,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:18.830449568",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "aa71242fad1d9602",
      "ParentSpanId": "19befa0011a4f293",
      "TraceState": "",
      "SpanName": "model_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2106839",
        "idle_ns": "3505050954",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3507154256,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:18.830845969",
      "TraceId": "32d42312db94563144d5fbc8fb3038ed",
      "SpanId": "9d81791df2fb1ac5",
      "ParentSpanId": "aa71242fad1d9602",
      "TraceState": "",
      "SpanName": "model_provider_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1550086",
        "gen_ai.operation.name": "chat",
        "gen_ai.request.model": "gpt-4.1-mini",
        "gen_ai.system": "vllm",
        "idle_ns": "3505103133",
        "level": "INFO",
        "provider_name": "vllm",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3506644784,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    }
  ],
  "response_success_2": [
    {
      "Timestamp": "2026-01-31 10:34:48.695183587",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "5703ca31b25b3c82",
      "ParentSpanId": "",
      "TraceState": "",
      "SpanName": "gateway_analytics",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "9950055",
        "gateway_analytics.browser_name": "PostmanRuntime",
        "gateway_analytics.browser_version": "7.51",
        "gateway_analytics.client_ip": "unknown",
        "gateway_analytics.device_type": "desktop",
        "gateway_analytics.gateway_processing_ms": "6",
        "gateway_analytics.id": "019c139e-9ff7-7143-bfc1-023e43e6b56e",
        "gateway_analytics.is_bot": "false",
        "gateway_analytics.method": "POST",
        "gateway_analytics.os_name": "Other",
        "gateway_analytics.path": "/v1/responses",
        "gateway_analytics.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "gateway_analytics.prompt_id": "test_structured_data",
        "gateway_analytics.prompt_version": "1",
        "gateway_analytics.protocol_version": "HTTP/1.1",
        "gateway_analytics.request_headers": "{\"accept\":\"*/*\",\"content-type\":\"application/json\"}",
        "gateway_analytics.request_timestamp": "2026-01-31T10:34:48.695351561+00:00",
        "gateway_analytics.response_headers": "{\"content-type\":\"application/json\"}",
        "gateway_analytics.response_timestamp": "2026-01-31T10:34:54.468713080+00:00",
        "gateway_analytics.status_code": "200",
        "gateway_analytics.tags": "{}",
        "gateway_analytics.total_duration_ms": "5773",
        "gateway_analytics.user_agent": "PostmanRuntime/7.51.0",
        "gen_ai.usage.input_tokens": "642",
        "gen_ai.usage.output_tokens": "250",
        "gen_ai.usage.total_tokens": "892",
        "idle_ns": "5764479600",
        "level": "INFO",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc"
      },
      "Duration": 5774419587,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.698232545",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "999c77471a49e41d",
      "ParentSpanId": "5703ca31b25b3c82",
      "TraceState": "",
      "SpanName": "POST /v1/responses",
      "SpanKind": "Server",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "5613940",
        "http.request.method": "POST",
        "http.route": "/v1/responses",
        "idle_ns": "5765876733",
        "level": "INFO",
        "network.protocol.version": "1.1",
        "server.address": "localhost:56054",
        "span.type": "web",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "url.path": "/v1/responses",
        "url.scheme": "",
        "user_agent.original": "PostmanRuntime/7.51.0"
      },
      "Duration": 5771476697,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.699022171",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "ab8bc0448eb7c3fc",
      "ParentSpanId": "999c77471a49e41d",
      "TraceState": "",
      "SpanName": "response_create_handler_observability",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "4500571",
        "gen_ai.gateway_request": "{\"input\":\"Create a dynamic output\",\"prompt\":{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}}",
        "gen_ai.gateway_response": "{\"id\":\"resp_13491bc6b9a24b6c9f99d9f87dae400e\",\"object\":\"response\",\"created_at\":1769855694,\"status\":\"completed\",\"background\":false,\"instructions\":[{\"content\":[{\"text\":\"You are expert to create structured data make sure to give this in structured data\",\"type\":\"input_text\"}],\"role\":\"system\",\"type\":\"message\"},{\"content\":[],\"role\":\"user\",\"type\":\"message\"}],\"max_output_tokens\":2000,\"model\":\"gpt\",\"output\":[{\"id\":\"msg_b9e8f5e1319a4563b6e7e4941ec2482c\",\"content\":[{\"annotations\":[],\"text\":\"{\\\"name\\\": \\\"John Doe\\\", \\\"age\\\": 30, \\\"country\\\": \\\"USA\\\"}\",\"type\":\"output_text\",\"logprobs\":null}],\"role\":\"assistant\",\"status\":\"completed\",\"type\":\"message\"}],\"parallel_tool_calls\":true,\"prompt\":{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"},\"reasoning\":{\"effort\":null,\"generate_summary\":null,\"summary\":null},\"temperature\":0.7,\"text\":{\"format\":{\"name\":\"OutputSchema\",\"schema\":{\"$defs\":{\"Output\":{\"properties\":{\"name\":{\"description\":\"The name of the user\",\"title\":\"Name\",\"type\":\"string\"},\"age\":{\"title\":\"Age\",\"type\":\"integer\"},\"country\":{\"title\":\"Country\",\"type\":\"string\"}},\"required\":[\"age\",\"name\",\"country\"],\"title\":\"Output\",\"type\":\"object\"}},\"properties\":{\"content\":{\"$ref\":\"#/$defs/Output\"}},\"required\":[\"content\"],\"title\":\"OutputSchema\",\"type\":\"object\"},\"type\":\"json_schema\",\"description\":null,\"strict\":true},\"verbosity\":null},\"tool_choice\":\"auto\",\"tools\":[],\"usage\":{\"input_tokens\":642,\"input_tokens_details\":{\"cached_tokens\":0},\"output_tokens\":250,\"output_tokens_details\":{\"reasoning_tokens\":0},\"total_tokens\":892}}",
        "gen_ai.inference_id": "019c139e-9ffb-7ea2-995a-12b40dbae4ac",
        "gen_ai.input.messages": "Create a dynamic output",
        "gen_ai.operation.name": "response_create",
        "gen_ai.output.messages": "[{\"id\":\"msg_b9e8f5e1319a4563b6e7e4941ec2482c\",\"content\":[{\"annotations\":[],\"text\":\"{\\\"name\\\": \\\"John Doe\\\", \\\"age\\\": 30, \\\"country\\\": \\\"USA\\\"}\",\"type\":\"output_text\",\"logprobs\":null}],\"role\":\"assistant\",\"status\":\"completed\",\"type\":\"message\"}]",
        "gen_ai.output.type": "{\"format\":{\"name\":\"OutputSchema\",\"schema\":{\"$defs\":{\"Output\":{\"properties\":{\"name\":{\"description\":\"The name of the user\",\"title\":\"Name\",\"type\":\"string\"},\"age\":{\"title\":\"Age\",\"type\":\"integer\"},\"country\":{\"title\":\"Country\",\"type\":\"string\"}},\"required\":[\"age\",\"name\",\"country\"],\"title\":\"Output\",\"type\":\"object\"}},\"properties\":{\"content\":{\"$ref\":\"#/$defs/Output\"}},\"required\":[\"content\"],\"title\":\"OutputSchema\",\"type\":\"object\"},\"type\":\"json_schema\",\"description\":null,\"strict\":true},\"verbosity\":null}",
        "gen_ai.processing_time_ms": "5768",
        "gen_ai.prompt": "{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}",
        "gen_ai.prompt.id": "test_structured_data",
        "gen_ai.prompt.variables": "{}",
        "gen_ai.prompt.version": "1",
        "gen_ai.raw_request": "{\"input\":\"Create a dynamic output\",\"prompt\":{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}}",
        "gen_ai.raw_response": "{\"id\":\"resp_13491bc6b9a24b6c9f99d9f87dae400e\",\"created_at\":1769855694,\"error\":null,\"incomplete_details\":null,\"instructions\":[{\"content\":[{\"text\":\"You are expert to create structured data make sure to give this in structured data\",\"type\":\"input_text\"}],\"role\":\"system\",\"type\":\"message\"},{\"content\":[],\"role\":\"user\",\"type\":\"message\"}],\"metadata\":null,\"model\":\"gpt\",\"object\":\"response\",\"output\":[{\"id\":\"msg_b9e8f5e1319a4563b6e7e4941ec2482c\",\"content\":[{\"annotations\":[],\"text\":\"{\\\"name\\\": \\\"John Doe\\\", \\\"age\\\": 30, \\\"country\\\": \\\"USA\\\"}\",\"type\":\"output_text\",\"logprobs\":null}],\"role\":\"assistant\",\"status\":\"completed\",\"type\":\"message\"}],\"parallel_tool_calls\":true,\"temperature\":0.7,\"tool_choice\":\"auto\",\"tools\":[],\"top_p\":null,\"background\":false,\"completed_at\":null,\"conversation\":null,\"max_output_tokens\":2000,\"max_tool_calls\":null,\"previous_response_id\":null,\"prompt\":{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"},\"prompt_cache_key\":null,\"prompt_cache_retention\":null,\"reasoning\":{\"effort\":null,\"generate_summary\":null,\"summary\":null},\"safety_identifier\":null,\"service_tier\":null,\"status\":\"completed\",\"text\":{\"format\":{\"name\":\"OutputSchema\",\"schema\":{\"$defs\":{\"Output\":{\"properties\":{\"name\":{\"description\":\"The name of the user\",\"title\":\"Name\",\"type\":\"string\"},\"age\":{\"title\":\"Age\",\"type\":\"integer\"},\"country\":{\"title\":\"Country\",\"type\":\"string\"}},\"required\":[\"age\",\"name\",\"country\"],\"title\":\"Output\",\"type\":\"object\"}},\"properties\":{\"content\":{\"$ref\":\"#/$defs/Output\"}},\"required\":[\"content\"],\"title\":\"OutputSchema\",\"type\":\"object\"},\"type\":\"json_schema\",\"description\":null,\"strict\":true},\"verbosity\":null},\"top_logprobs\":null,\"truncation\":null,\"usage\":{\"input_tokens\":642,\"input_tokens_details\":{\"cached_tokens\":0},\"output_tokens\":250,\"output_tokens_details\":{\"reasoning_tokens\":0},\"total_tokens\":892},\"user\":null}",
        "gen_ai.request_arrival_time": "2026-01-31T10:34:48.699049973+00:00",
        "gen_ai.request_forward_time": "2026-01-31T10:34:54.467091960+00:00",
        "gen_ai.response.background": "false",
        "gen_ai.response.created_at": "1769855694",
        "gen_ai.response.id": "resp_13491bc6b9a24b6c9f99d9f87dae400e",
        "gen_ai.response.max_output_tokens": "2000",
        "gen_ai.response.model": "gpt",
        "gen_ai.response.object": "response",
        "gen_ai.response.parallel_tool_calls": "true",
        "gen_ai.response.prompt": "{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}",
        "gen_ai.response.reasoning": "{\"effort\":null,\"generate_summary\":null,\"summary\":null}",
        "gen_ai.response.status": "completed",
        "gen_ai.response.temperature": "0.699999988079071",
        "gen_ai.response.tool_choice": "auto",
        "gen_ai.response.tools": "[]",
        "gen_ai.response_time_ms": "5767",
        "gen_ai.system.instructions": "[{\"content\":[{\"text\":\"You are expert to create structured data make sure to give this in structured data\",\"type\":\"input_text\"}],\"role\":\"system\",\"type\":\"message\"},{\"content\":[],\"role\":\"user\",\"type\":\"message\"}]",
        "gen_ai.usage": "{\"input_tokens\":642,\"input_tokens_details\":{\"cached_tokens\":0},\"output_tokens\":250,\"output_tokens_details\":{\"reasoning_tokens\":0},\"total_tokens\":892}",
        "gen_ai.usage.input_tokens": "642",
        "gen_ai.usage.output_tokens": "250",
        "gen_ai.usage.total_tokens": "892",
        "idle_ns": "5764789559",
        "level": "INFO",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc"
      },
      "Duration": 5769281273,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.699350965",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "edfc971309061e1d",
      "ParentSpanId": "ab8bc0448eb7c3fc",
      "TraceState": "",
      "SpanName": "model_execute_response_with_detection",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2830502",
        "idle_ns": "5764856632",
        "level": "INFO",
        "model_name": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 5767679290,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.699390930",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "c488a1a746ac8e11",
      "ParentSpanId": "edfc971309061e1d",
      "TraceState": "",
      "SpanName": "model_provider_execute_response_with_detection",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2634816",
        "idle_ns": "5764950588",
        "level": "INFO",
        "provider_name": "budprompt",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 5767581807,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.699414364",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "9640f48d996ecd82",
      "ParentSpanId": "c488a1a746ac8e11",
      "TraceState": "",
      "SpanName": "budprompt_execute_response",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2416236",
        "idle_ns": "5765043243",
        "level": "INFO",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 5767456373,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.704536288",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "74344b19a43d95be",
      "ParentSpanId": "9640f48d996ecd82",
      "TraceState": "",
      "SpanName": "invoke_agent budprompt",
      "SpanKind": "Internal",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "budprompt.responses.services",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "gen_ai.input.messages": "Create a dynamic output",
        "gen_ai.operation.name": "invoke_agent",
        "gen_ai.output.messages": "[{\"id\": \"msg_b9e8f5e1319a4563b6e7e4941ec2482c\", \"content\": [{\"annotations\": [], \"text\": \"{\\\"name\\\": \\\"John Doe\\\", \\\"age\\\": 30, \\\"country\\\": \\\"USA\\\"}\", \"type\": \"output_text\", \"logprobs\": null}], \"role\": \"assistant\", \"status\": \"completed\", \"type\": \"message\"}]",
        "gen_ai.output.type": "{\"format\":{\"name\":\"OutputSchema\",\"schema_\":{\"$defs\":{\"Output\":{\"properties\":{\"name\":{\"description\":\"The name of the user\",\"title\":\"Name\",\"type\":\"string\"},\"age\":{\"title\":\"Age\",\"type\":\"integer\"},\"country\":{\"title\":\"Country\",\"type\":\"string\"}},\"required\":[\"age\",\"name\",\"country\"],\"title\":\"Output\",\"type\":\"object\"}},\"properties\":{\"content\":{\"$ref\":\"#/$defs/Output\"}},\"required\":[\"content\"],\"title\":\"OutputSchema\",\"type\":\"object\"},\"type\":\"json_schema\",\"description\":null,\"strict\":true},\"verbosity\":null}",
        "gen_ai.prompt.id": "test_structured_data",
        "gen_ai.prompt.variables": "{}",
        "gen_ai.prompt.version": "1",
        "gen_ai.request.max_tokens": "2000",
        "gen_ai.request.stream": "false",
        "gen_ai.request.temperature": "0.7",
        "gen_ai.response.created_at": "1769855694",
        "gen_ai.response.id": "resp_13491bc6b9a24b6c9f99d9f87dae400e",
        "gen_ai.response.model": "gpt",
        "gen_ai.response.object": "response",
        "gen_ai.response.status": "completed",
        "gen_ai.system_instructions": "[{\"content\": [{\"text\": \"You are expert to create structured data make sure to give this in structured data\", \"type\": \"input_text\"}], \"role\": \"system\", \"type\": \"message\"}, {\"content\": [], \"role\": \"user\", \"type\": \"message\"}]",
        "gen_ai.usage.input_tokens": "642",
        "gen_ai.usage.output_tokens": "250",
        "gen_ai.usage.total_tokens": "892"
      },
      "Duration": 5720745971,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.711990148",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "b1ae74fb62645942",
      "ParentSpanId": "74344b19a43d95be",
      "TraceState": "",
      "SpanName": "invoke_agent agent",
      "SpanKind": "Internal",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "pydantic-ai",
      "ScopeVersion": "1.4.0",
      "SpanAttributes": {
        "agent_name": "agent",
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "final_result": "{\"name\": \"John Doe\", \"age\": 30, \"country\": \"USA\"}",
        "gen_ai.agent.name": "agent",
        "gen_ai.usage.input_tokens": "642",
        "gen_ai.usage.output_tokens": "250",
        "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"pydantic_ai.all_messages\": {\"type\": \"array\"}, \"pydantic_ai.new_message_index\": {}, \"final_result\": {\"type\": \"object\"}}}",
        "logfire.msg": "agent run",
        "model_name": "gpt",
        "pydantic_ai.all_messages": "[{\"role\": \"system\", \"parts\": [{\"type\": \"text\", \"content\": \"You are expert to create structured data make sure to give this in structured data\"}]}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"Create a dynamic output\"}]}, {\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"{\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\"}], \"finish_reason\": \"stop\"}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"3 validation errors: [\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"name\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"age\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"country\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  }\\n]\\n\\nFix the errors and try again.\"}]}, {\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"{\\n  \\\"name\\\": \\\"John Doe\\\",\\n  \\\"age\\\": 30,\\n  \\\"country\\\": \\\"USA\\\",\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\"}], \"finish_reason\": \"stop\"}]",
        "pydantic_ai.new_message_index": "1"
      },
      "Duration": 5711987032,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.712711746",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "d1fa366b25d2afb1",
      "ParentSpanId": "b1ae74fb62645942",
      "TraceState": "",
      "SpanName": "chat gpt",
      "SpanKind": "Internal",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "pydantic-ai",
      "ScopeVersion": "1.4.0",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "gen_ai.input.messages": "[{\"role\": \"system\", \"parts\": [{\"type\": \"text\", \"content\": \"You are expert to create structured data make sure to give this in structured data\"}]}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"Create a dynamic output\"}]}]",
        "gen_ai.operation.name": "chat",
        "gen_ai.output.messages": "[{\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"{\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\"}], \"finish_reason\": \"stop\"}]",
        "gen_ai.request.frequency_penalty": "0",
        "gen_ai.request.max_tokens": "2000",
        "gen_ai.request.model": "gpt",
        "gen_ai.request.presence_penalty": "0",
        "gen_ai.request.temperature": "0.7",
        "gen_ai.response.finish_reasons": "[\"stop\"]",
        "gen_ai.response.id": "019c139e-a014-7c73-8fc8-565496aff396",
        "gen_ai.response.model": "gpt",
        "gen_ai.system": "openai",
        "gen_ai.usage.input_tokens": "30",
        "gen_ai.usage.output_tokens": "114",
        "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"gen_ai.input.messages\": {\"type\": \"array\"}, \"gen_ai.output.messages\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
        "model_request_parameters": "{\"function_tools\": [], \"builtin_tools\": [], \"output_mode\": \"native\", \"output_object\": {\"json_schema\": {\"properties\": {\"name\": {\"type\": \"string\"}, \"age\": {\"type\": \"integer\"}, \"country\": {\"type\": \"string\"}}, \"required\": [\"name\", \"age\", \"country\"], \"type\": \"object\", \"additionalProperties\": false}, \"name\": \"Output\", \"description\": null, \"strict\": true}, \"output_tools\": [], \"allow_text_output\": true, \"allow_image_output\": false}",
        "server.address": "localhost",
        "server.port": "56054"
      },
      "Duration": 2543629527,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.715298440",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "f48fd0a433ebae69",
      "ParentSpanId": "d1fa366b25d2afb1",
      "TraceState": "",
      "SpanName": "POST",
      "SpanKind": "Client",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "opentelemetry.instrumentation.httpx",
      "ScopeVersion": "0.60b1",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "http.method": "POST",
        "http.status_code": "200",
        "http.url": "http://localhost:56054/v1/chat/completions"
      },
      "Duration": 2538738386,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.718190093",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "85dfac30abd67c16",
      "ParentSpanId": "f48fd0a433ebae69",
      "TraceState": "",
      "SpanName": "gateway_analytics",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "10654116",
        "gateway_analytics.browser_name": "Other",
        "gateway_analytics.client_ip": "unknown",
        "gateway_analytics.device_type": "desktop",
        "gateway_analytics.gateway_processing_ms": "9",
        "gateway_analytics.id": "019c139e-a00e-7502-a853-85efc2e63b15",
        "gateway_analytics.inference_id": "019c139e-a014-7c73-8fc8-565496aff396",
        "gateway_analytics.is_bot": "false",
        "gateway_analytics.method": "POST",
        "gateway_analytics.os_name": "Other",
        "gateway_analytics.path": "/v1/chat/completions",
        "gateway_analytics.protocol_version": "HTTP/1.1",
        "gateway_analytics.request_headers": "{\"content-type\":\"application/json\",\"accept\":\"application/json\"}",
        "gateway_analytics.request_timestamp": "2026-01-31T10:34:48.718475687+00:00",
        "gateway_analytics.response_headers": "{\"content-type\":\"application/json\"}",
        "gateway_analytics.response_timestamp": "2026-01-31T10:34:51.252777825+00:00",
        "gateway_analytics.status_code": "200",
        "gateway_analytics.tags": "{}",
        "gateway_analytics.total_duration_ms": "2534",
        "gateway_analytics.user_agent": "budprompt v.4.0",
        "idle_ns": "2524454148",
        "level": "INFO",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc"
      },
      "Duration": 2535098056,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.722708899",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "0bd097fa25fb80ef",
      "ParentSpanId": "85dfac30abd67c16",
      "TraceState": "",
      "SpanName": "POST /v1/chat/completions",
      "SpanKind": "Server",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "5458963",
        "http.request.method": "POST",
        "http.route": "/v1/chat/completions",
        "idle_ns": "2525242496",
        "level": "INFO",
        "network.protocol.version": "1.1",
        "server.address": "localhost:56054",
        "span.type": "web",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "url.path": "/v1/chat/completions",
        "url.scheme": "",
        "user_agent.original": "budprompt v.4.0"
      },
      "Duration": 2530691810,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.723898284",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "0630fcdf2a90b8ec",
      "ParentSpanId": "0bd097fa25fb80ef",
      "TraceState": "",
      "SpanName": "inference_handler_observability",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "4141331",
        "chat_inference.episode_id": "019c139e-a014-7c73-8fc8-566e53cfab46",
        "chat_inference.extra_body": "[]",
        "chat_inference.function_name": "budgateway::default",
        "chat_inference.id": "019c139e-a014-7c73-8fc8-565496aff396",
        "chat_inference.inference_params": "{\"chat_completion\":{\"temperature\":0.7,\"max_tokens\":2000,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"json_mode\":\"strict\"}}",
        "chat_inference.input": "{\"system\":\"You are expert to create structured data make sure to give this in structured data\",\"messages\":[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"value\":\"Create a dynamic output\"}]}]}",
        "chat_inference.output": "[{\"type\":\"text\",\"text\":\"{\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\"}]",
        "chat_inference.processing_time_ms": "2526",
        "chat_inference.tags": "{}",
        "chat_inference.variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "idle_ns": "2524412101",
        "level": "INFO",
        "model_inference.cached": "false",
        "model_inference.endpoint_type": "chat",
        "model_inference.finish_reason": "stop",
        "model_inference.gateway_request": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are expert to create structured data make sure to give this in structured data\"},{\"role\":\"user\",\"content\":\"Create a dynamic output\"}],\"model\":\"gpt-4.1-mini\",\"temperature\":0.699999988079071,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"max_tokens\":2000,\"stream\":false,\"guided_json\":{\"properties\":{\"name\":{\"type\":\"string\"},\"age\":{\"type\":\"integer\"},\"country\":{\"type\":\"string\"}},\"required\":[\"name\",\"age\",\"country\"],\"type\":\"object\",\"additionalProperties\":false},\"logprobs\":false}",
        "model_inference.gateway_response": "{\"id\":\"chatcmpl-D42bR1BkQ8r9fRC0PKm5lG9H2wwYk\",\"object\":\"chat.completion\",\"created\":1769855689,\"model\":\"gpt-4.1-mini-2025-04-14\",\"choices\":[{\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"{\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\",\"refusal\":null,\"annotations\":[]},\"logprobs\":null,\"finish_reason\":\"stop\"}],\"usage\":{\"prompt_tokens\":30,\"completion_tokens\":114,\"total_tokens\":144,\"prompt_tokens_details\":{\"cached_tokens\":0,\"audio_tokens\":0},\"completion_tokens_details\":{\"reasoning_tokens\":0,\"audio_tokens\":0,\"accepted_prediction_tokens\":0,\"rejected_prediction_tokens\":0}},\"service_tier\":\"default\",\"system_fingerprint\":\"fp_e01c6f58e1\"}",
        "model_inference.id": "019c139e-a9f2-77f0-b11a-fbda7241fa5b",
        "model_inference.inference_id": "019c139e-a014-7c73-8fc8-565496aff396",
        "model_inference.input_messages": "[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"Create a dynamic output\"}]}]",
        "model_inference.input_tokens": "30",
        "model_inference.model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference.model_provider_name": "vllm",
        "model_inference.output": "[{\"type\":\"text\",\"text\":\"{\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\"}]",
        "model_inference.output_tokens": "114",
        "model_inference.raw_request": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are expert to create structured data make sure to give this in structured data\"},{\"role\":\"user\",\"content\":\"Create a dynamic output\"}],\"model\":\"gpt-4.1-mini\",\"temperature\":0.699999988079071,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"max_tokens\":2000,\"stream\":false,\"guided_json\":{\"properties\":{\"name\":{\"type\":\"string\"},\"age\":{\"type\":\"integer\"},\"country\":{\"type\":\"string\"}},\"required\":[\"name\",\"age\",\"country\"],\"type\":\"object\",\"additionalProperties\":false},\"logprobs\":false}",
        "model_inference.raw_response": "{\"id\":\"chatcmpl-D42bR1BkQ8r9fRC0PKm5lG9H2wwYk\",\"object\":\"chat.completion\",\"created\":1769855689,\"model\":\"gpt-4.1-mini-2025-04-14\",\"choices\":[{\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"{\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\",\"refusal\":null,\"annotations\":[]},\"logprobs\":null,\"finish_reason\":\"stop\"}],\"usage\":{\"prompt_tokens\":30,\"completion_tokens\":114,\"total_tokens\":144,\"prompt_tokens_details\":{\"cached_tokens\":0,\"audio_tokens\":0},\"completion_tokens_details\":{\"reasoning_tokens\":0,\"audio_tokens\":0,\"accepted_prediction_tokens\":0,\"rejected_prediction_tokens\":0}},\"service_tier\":\"default\",\"system_fingerprint\":\"fp_e01c6f58e1\"}",
        "model_inference.response_time_ms": "2525",
        "model_inference.system": "You are expert to create structured data make sure to give this in structured data",
        "model_inference.timestamp": "1769855691",
        "model_inference_details.cost": "0.00372",
        "model_inference_details.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference_details.inference_id": "019c139e-a014-7c73-8fc8-565496aff396",
        "model_inference_details.is_success": "true",
        "model_inference_details.model_id": "019787c1-3de1-7b50-969b-e0a58514b6a2",
        "model_inference_details.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "model_inference_details.request_arrival_time": "2026-01-31T10:34:48.723948618+00:00",
        "model_inference_details.request_forward_time": "2026-01-31T10:34:51.251589164+00:00",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 2528542912,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.724314672",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "076e2f111dde2953",
      "ParentSpanId": "0630fcdf2a90b8ec",
      "TraceState": "",
      "SpanName": "function_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "analytics": "Some(Mutex { data: RequestAnalytics { record: GatewayAnalyticsDatabaseInsert { id: 019c139e-a00e-7502-a853-85efc2e63b15, inference_id: None, client_ip: \"unknown\", proxy_chain: None, protocol_version: \"HTTP/1.1\", country_code: None, country_name: None, region: None, city: None, latitude: None, longitude: None, timezone: None, asn: None, isp: None, user_agent: Some(\"budprompt v.4.0\"), device_type: Some(\"desktop\"), browser_name: Some(\"Other\"), browser_version: None, os_name: Some(\"Other\"), os_version: None, is_bot: false, method: \"POST\", path: \"/v1/chat/completions\", query_params: None, request_headers: {\"content-type\": \"application/json\", \"accept\": \"application/json\"}, body_size: None, api_key_id: None, auth_method: None, user_id: None, project_id: None, endpoint_id: None, request_timestamp: 2026-01-31T10:34:48.718475687Z, response_timestamp: 2026-01-31T10:34:48.718475687Z, gateway_processing_ms: 0, total_duration_ms: 0, model_latency_ms: None, model_name: None, model_provider: None, model_version: None, routing_decision: None, status_code: 0, response_size: None, response_headers: {}, error_type: None, error_message: None, is_blocked: false, blocking_event: None, tags: {} }, start_time: Instant { tv_sec: 98156, tv_nsec: 825417787 } } })",
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2863422",
        "episode_id": "019c139e-a014-7c73-8fc8-566e53cfab46",
        "idle_ns": "2524062278",
        "inference_id": "019c139e-a014-7c73-8fc8-565496aff396",
        "level": "INFO",
        "model_credential_store": "RwLock { data: {}, poisoned: false, .. }",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 2526917264,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.724650911",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "a7b5d08c91750168",
      "ParentSpanId": "076e2f111dde2953",
      "TraceState": "",
      "SpanName": "variant_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2360742",
        "function_name": "budgateway::default",
        "idle_ns": "2524065655",
        "level": "INFO",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4"
      },
      "Duration": 2526415856,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.724787696",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "e0a3cc8671f17da1",
      "ParentSpanId": "a7b5d08c91750168",
      "TraceState": "",
      "SpanName": "model_chain_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2088965",
        "idle_ns": "2524092253",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 2526172703,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.724824445",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "74ac30d12f2c224a",
      "ParentSpanId": "e0a3cc8671f17da1",
      "TraceState": "",
      "SpanName": "model_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1992924",
        "idle_ns": "2524110689",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 2526100197,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:48.725090412",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "820b659c6ba71176",
      "ParentSpanId": "74ac30d12f2c224a",
      "TraceState": "",
      "SpanName": "model_provider_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1545619",
        "gen_ai.operation.name": "chat",
        "gen_ai.request.model": "gpt-4.1-mini",
        "gen_ai.system": "vllm",
        "idle_ns": "2524220493",
        "level": "INFO",
        "provider_name": "vllm",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 2525732770,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:51.257223782",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "3d00517efc78e438",
      "ParentSpanId": "b1ae74fb62645942",
      "TraceState": "",
      "SpanName": "chat gpt",
      "SpanKind": "Internal",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "pydantic-ai",
      "ScopeVersion": "1.4.0",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "gen_ai.input.messages": "[{\"role\": \"system\", \"parts\": [{\"type\": \"text\", \"content\": \"You are expert to create structured data make sure to give this in structured data\"}]}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"Create a dynamic output\"}]}, {\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"{\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\"}], \"finish_reason\": \"stop\"}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"3 validation errors: [\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"name\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"age\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"country\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  }\\n]\\n\\nFix the errors and try again.\"}]}]",
        "gen_ai.operation.name": "chat",
        "gen_ai.output.messages": "[{\"role\": \"assistant\", \"parts\": [{\"type\": \"text\", \"content\": \"{\\n  \\\"name\\\": \\\"John Doe\\\",\\n  \\\"age\\\": 30,\\n  \\\"country\\\": \\\"USA\\\",\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\"}], \"finish_reason\": \"stop\"}]",
        "gen_ai.request.frequency_penalty": "0",
        "gen_ai.request.max_tokens": "2000",
        "gen_ai.request.model": "gpt",
        "gen_ai.request.presence_penalty": "0",
        "gen_ai.request.temperature": "0.7",
        "gen_ai.response.finish_reasons": "[\"stop\"]",
        "gen_ai.response.id": "019c139e-aa8a-7c12-bc68-1f28432a99d1",
        "gen_ai.response.model": "gpt",
        "gen_ai.system": "openai",
        "gen_ai.usage.input_tokens": "612",
        "gen_ai.usage.output_tokens": "136",
        "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"gen_ai.input.messages\": {\"type\": \"array\"}, \"gen_ai.output.messages\": {\"type\": \"array\"}, \"model_request_parameters\": {\"type\": \"object\"}}}",
        "model_request_parameters": "{\"function_tools\": [], \"builtin_tools\": [], \"output_mode\": \"native\", \"output_object\": {\"json_schema\": {\"properties\": {\"name\": {\"type\": \"string\"}, \"age\": {\"type\": \"integer\"}, \"country\": {\"type\": \"string\"}}, \"required\": [\"name\", \"age\", \"country\"], \"type\": \"object\", \"additionalProperties\": false}, \"name\": \"Output\", \"description\": null, \"strict\": true}, \"output_tools\": [], \"allow_text_output\": true, \"allow_image_output\": false}",
        "server.address": "localhost",
        "server.port": "56054"
      },
      "Duration": 3166294190,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:51.260739381",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "1108b40244c41a3a",
      "ParentSpanId": "3d00517efc78e438",
      "TraceState": "",
      "SpanName": "POST",
      "SpanKind": "Client",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "opentelemetry.instrumentation.httpx",
      "ScopeVersion": "0.60b1",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "http.method": "POST",
        "http.status_code": "200",
        "http.url": "http://localhost:56054/v1/chat/completions"
      },
      "Duration": 3160181685,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:51.262229155",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "7b28ec4df897389a",
      "ParentSpanId": "1108b40244c41a3a",
      "TraceState": "",
      "SpanName": "gateway_analytics",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "146728553",
        "gateway_analytics.browser_name": "Other",
        "gateway_analytics.client_ip": "unknown",
        "gateway_analytics.device_type": "desktop",
        "gateway_analytics.gateway_processing_ms": "143",
        "gateway_analytics.id": "019c139e-a9fe-7b51-9787-d2acfd86e371",
        "gateway_analytics.inference_id": "019c139e-aa8a-7c12-bc68-1f28432a99d1",
        "gateway_analytics.is_bot": "false",
        "gateway_analytics.method": "POST",
        "gateway_analytics.os_name": "Other",
        "gateway_analytics.path": "/v1/chat/completions",
        "gateway_analytics.protocol_version": "HTTP/1.1",
        "gateway_analytics.request_headers": "{\"content-type\":\"application/json\",\"accept\":\"application/json\"}",
        "gateway_analytics.request_timestamp": "2026-01-31T10:34:51.262875012+00:00",
        "gateway_analytics.response_headers": "{\"content-type\":\"application/json\"}",
        "gateway_analytics.response_timestamp": "2026-01-31T10:34:54.419716958+00:00",
        "gateway_analytics.status_code": "200",
        "gateway_analytics.tags": "{}",
        "gateway_analytics.total_duration_ms": "3156",
        "gateway_analytics.user_agent": "budprompt v.4.0",
        "idle_ns": "3011233696",
        "level": "INFO",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc"
      },
      "Duration": 3157941541,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:51.395487986",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "bb5e8a93e8ee0408",
      "ParentSpanId": "7b28ec4df897389a",
      "TraceState": "",
      "SpanName": "POST /v1/chat/completions",
      "SpanKind": "Server",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "13212153",
        "http.request.method": "POST",
        "http.route": "/v1/chat/completions",
        "idle_ns": "3011571265",
        "level": "INFO",
        "network.protocol.version": "1.1",
        "server.address": "localhost:56054",
        "span.type": "web",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker",
        "url.path": "/v1/chat/completions",
        "url.scheme": "",
        "user_agent.original": "budprompt v.4.0"
      },
      "Duration": 3024770133,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:51.398967111",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "785c8b64815844be",
      "ParentSpanId": "bb5e8a93e8ee0408",
      "TraceState": "",
      "SpanName": "inference_handler_observability",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "9906645",
        "chat_inference.episode_id": "019c139e-aa8a-7c12-bc68-1f35d7b17364",
        "chat_inference.extra_body": "[]",
        "chat_inference.function_name": "budgateway::default",
        "chat_inference.id": "019c139e-aa8a-7c12-bc68-1f28432a99d1",
        "chat_inference.inference_params": "{\"chat_completion\":{\"temperature\":0.7,\"max_tokens\":2000,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"json_mode\":\"strict\"}}",
        "chat_inference.input": "{\"system\":\"You are expert to create structured data make sure to give this in structured data\",\"messages\":[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"value\":\"Create a dynamic output\"}]},{\"role\":\"assistant\",\"content\":[{\"type\":\"text\",\"value\":\"{\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\"}]},{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"value\":\"3 validation errors: [\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"name\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"age\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"country\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  }\\n]\\n\\nFix the errors and try again.\"}]}]}",
        "chat_inference.output": "[{\"type\":\"text\",\"text\":\"{\\n  \\\"name\\\": \\\"John Doe\\\",\\n  \\\"age\\\": 30,\\n  \\\"country\\\": \\\"USA\\\",\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\"}]",
        "chat_inference.processing_time_ms": "3015",
        "chat_inference.tags": "{}",
        "chat_inference.variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "idle_ns": "3010523996",
        "level": "INFO",
        "model_inference.cached": "false",
        "model_inference.endpoint_type": "chat",
        "model_inference.finish_reason": "stop",
        "model_inference.gateway_request": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are expert to create structured data make sure to give this in structured data\"},{\"role\":\"user\",\"content\":\"Create a dynamic output\"},{\"role\":\"assistant\",\"content\":\"{\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\"},{\"role\":\"user\",\"content\":\"3 validation errors: [\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"name\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"age\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"country\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  }\\n]\\n\\nFix the errors and try again.\"}],\"model\":\"gpt-4.1-mini\",\"temperature\":0.699999988079071,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"max_tokens\":2000,\"stream\":false,\"guided_json\":{\"properties\":{\"name\":{\"type\":\"string\"},\"age\":{\"type\":\"integer\"},\"country\":{\"type\":\"string\"}},\"required\":[\"name\",\"age\",\"country\"],\"type\":\"object\",\"additionalProperties\":false},\"logprobs\":false}",
        "model_inference.gateway_response": "{\"id\":\"chatcmpl-D42bUoqFags4FhhLsClh0J46tIyrJ\",\"object\":\"chat.completion\",\"created\":1769855692,\"model\":\"gpt-4.1-mini-2025-04-14\",\"choices\":[{\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"{\\n  \\\"name\\\": \\\"John Doe\\\",\\n  \\\"age\\\": 30,\\n  \\\"country\\\": \\\"USA\\\",\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\",\"refusal\":null,\"annotations\":[]},\"logprobs\":null,\"finish_reason\":\"stop\"}],\"usage\":{\"prompt_tokens\":612,\"completion_tokens\":136,\"total_tokens\":748,\"prompt_tokens_details\":{\"cached_tokens\":0,\"audio_tokens\":0},\"completion_tokens_details\":{\"reasoning_tokens\":0,\"audio_tokens\":0,\"accepted_prediction_tokens\":0,\"rejected_prediction_tokens\":0}},\"service_tier\":\"default\",\"system_fingerprint\":\"fp_e01c6f58e1\"}",
        "model_inference.id": "019c139e-b651-7bc2-b16a-d7b528d0cdb7",
        "model_inference.inference_id": "019c139e-aa8a-7c12-bc68-1f28432a99d1",
        "model_inference.input_messages": "[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"Create a dynamic output\"}]},{\"role\":\"assistant\",\"content\":[{\"type\":\"text\",\"text\":\"{\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\"}]},{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"3 validation errors: [\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"name\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"age\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"country\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  }\\n]\\n\\nFix the errors and try again.\"}]}]",
        "model_inference.input_tokens": "612",
        "model_inference.model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference.model_provider_name": "vllm",
        "model_inference.output": "[{\"type\":\"text\",\"text\":\"{\\n  \\\"name\\\": \\\"John Doe\\\",\\n  \\\"age\\\": 30,\\n  \\\"country\\\": \\\"USA\\\",\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\"}]",
        "model_inference.output_tokens": "136",
        "model_inference.raw_request": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are expert to create structured data make sure to give this in structured data\"},{\"role\":\"user\",\"content\":\"Create a dynamic output\"},{\"role\":\"assistant\",\"content\":\"{\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\"},{\"role\":\"user\",\"content\":\"3 validation errors: [\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"name\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"age\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  },\\n  {\\n    \\\"type\\\": \\\"missing\\\",\\n    \\\"loc\\\": [\\n      \\\"country\\\"\\n    ],\\n    \\\"msg\\\": \\\"Field required\\\",\\n    \\\"input\\\": {\\n      \\\"responseType\\\": \\\"dynamic\\\",\\n      \\\"content\\\": {\\n        \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n        \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n        \\\"data\\\": {\\n          \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n          \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n        }\\n      },\\n      \\\"placeholders\\\": {\\n        \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n        \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n        \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n      }\\n    }\\n  }\\n]\\n\\nFix the errors and try again.\"}],\"model\":\"gpt-4.1-mini\",\"temperature\":0.699999988079071,\"presence_penalty\":0.0,\"frequency_penalty\":0.0,\"max_tokens\":2000,\"stream\":false,\"guided_json\":{\"properties\":{\"name\":{\"type\":\"string\"},\"age\":{\"type\":\"integer\"},\"country\":{\"type\":\"string\"}},\"required\":[\"name\",\"age\",\"country\"],\"type\":\"object\",\"additionalProperties\":false},\"logprobs\":false}",
        "model_inference.raw_response": "{\"id\":\"chatcmpl-D42bUoqFags4FhhLsClh0J46tIyrJ\",\"object\":\"chat.completion\",\"created\":1769855692,\"model\":\"gpt-4.1-mini-2025-04-14\",\"choices\":[{\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"{\\n  \\\"name\\\": \\\"John Doe\\\",\\n  \\\"age\\\": 30,\\n  \\\"country\\\": \\\"USA\\\",\\n  \\\"responseType\\\": \\\"dynamic\\\",\\n  \\\"content\\\": {\\n    \\\"message\\\": \\\"This is a dynamic output generated based on your request.\\\",\\n    \\\"timestamp\\\": \\\"{{current_timestamp}}\\\",\\n    \\\"data\\\": {\\n      \\\"randomNumber\\\": \\\"{{random_number}}\\\",\\n      \\\"uniqueId\\\": \\\"{{uuid}}\\\"\\n    }\\n  },\\n  \\\"placeholders\\\": {\\n    \\\"current_timestamp\\\": \\\"The current date and time when the output is generated.\\\",\\n    \\\"random_number\\\": \\\"A randomly generated number.\\\",\\n    \\\"uuid\\\": \\\"A universally unique identifier.\\\"\\n  }\\n}\",\"refusal\":null,\"annotations\":[]},\"logprobs\":null,\"finish_reason\":\"stop\"}],\"usage\":{\"prompt_tokens\":612,\"completion_tokens\":136,\"total_tokens\":748,\"prompt_tokens_details\":{\"cached_tokens\":0,\"audio_tokens\":0},\"completion_tokens_details\":{\"reasoning_tokens\":0,\"audio_tokens\":0,\"accepted_prediction_tokens\":0,\"rejected_prediction_tokens\":0}},\"service_tier\":\"default\",\"system_fingerprint\":\"fp_e01c6f58e1\"}",
        "model_inference.response_time_ms": "3013",
        "model_inference.system": "You are expert to create structured data make sure to give this in structured data",
        "model_inference.timestamp": "1769855694",
        "model_inference_details.cost": "0.0102",
        "model_inference_details.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference_details.inference_id": "019c139e-aa8a-7c12-bc68-1f28432a99d1",
        "model_inference_details.is_success": "true",
        "model_inference_details.model_id": "019787c1-3de1-7b50-969b-e0a58514b6a2",
        "model_inference_details.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "model_inference_details.request_arrival_time": "2026-01-31T10:34:51.399023305+00:00",
        "model_inference_details.request_forward_time": "2026-01-31T10:34:54.418472071+00:00",
        "thread.id": "9",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3020418417,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:51.401972487",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "26155112dd5666df",
      "ParentSpanId": "785c8b64815844be",
      "TraceState": "",
      "SpanName": "function_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "analytics": "Some(Mutex { data: RequestAnalytics { record: GatewayAnalyticsDatabaseInsert { id: 019c139e-a9fe-7b51-9787-d2acfd86e371, inference_id: None, client_ip: \"unknown\", proxy_chain: None, protocol_version: \"HTTP/1.1\", country_code: None, country_name: None, region: None, city: None, latitude: None, longitude: None, timezone: None, asn: None, isp: None, user_agent: Some(\"budprompt v.4.0\"), device_type: Some(\"desktop\"), browser_name: Some(\"Other\"), browser_version: None, os_name: Some(\"Other\"), os_version: None, is_bot: false, method: \"POST\", path: \"/v1/chat/completions\", query_params: None, request_headers: {\"content-type\": \"application/json\", \"accept\": \"application/json\"}, body_size: None, api_key_id: None, auth_method: None, user_id: None, project_id: None, endpoint_id: None, request_timestamp: 2026-01-31T10:34:51.262875012Z, response_timestamp: 2026-01-31T10:34:51.262875012Z, gateway_processing_ms: 0, total_duration_ms: 0, model_latency_ms: None, model_name: None, model_provider: None, model_version: None, routing_decision: None, status_code: 0, response_size: None, response_headers: {}, error_type: None, error_message: None, is_blocked: false, blocking_event: None, tags: {} }, start_time: Instant { tv_sec: 98159, tv_nsec: 369812944 } } })",
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "5165775",
        "episode_id": "019c139e-aa8a-7c12-bc68-1f35d7b17364",
        "idle_ns": "3010639922",
        "inference_id": "019c139e-aa8a-7c12-bc68-1f28432a99d1",
        "level": "INFO",
        "model_credential_store": "RwLock { data: {}, poisoned: false, .. }",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "thread.id": "9",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3015792843,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:51.403000709",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "17fd2bd2c02b99e1",
      "ParentSpanId": "26155112dd5666df",
      "TraceState": "",
      "SpanName": "variant_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "4584048",
        "function_name": "budgateway::default",
        "idle_ns": "3010064917",
        "level": "INFO",
        "stream": "false",
        "thread.id": "9",
        "thread.name": "tokio-runtime-worker",
        "variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4"
      },
      "Duration": 3014637033,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:51.403189271",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "0c82e00ddaa1fbf5",
      "ParentSpanId": "17fd2bd2c02b99e1",
      "TraceState": "",
      "SpanName": "model_chain_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "4267686",
        "idle_ns": "3010095064",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "9",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3014347683,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:51.403261867",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "2039d1bb8abce817",
      "ParentSpanId": "0c82e00ddaa1fbf5",
      "TraceState": "",
      "SpanName": "model_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "4133194",
        "idle_ns": "3010115402",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "9",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3014241223,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:34:51.403809400",
      "TraceId": "c7dac6e5be8d42586407d24899b2b8f1",
      "SpanId": "1f8c109bb19ededb",
      "ParentSpanId": "2039d1bb8abce817",
      "TraceState": "",
      "SpanName": "model_provider_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "3423598",
        "gen_ai.operation.name": "chat",
        "gen_ai.request.model": "gpt-4.1-mini",
        "gen_ai.system": "vllm",
        "idle_ns": "3010187237",
        "level": "INFO",
        "provider_name": "vllm",
        "stream": "false",
        "thread.id": "9",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3013595176,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    }
  ],
  "response_error": [
    {
      "Timestamp": "2026-01-31 10:35:31.640116890",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "730657a81c8e5151",
      "ParentSpanId": "",
      "TraceState": "",
      "SpanName": "gateway_analytics",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "45742691",
        "gateway_analytics.browser_name": "PostmanRuntime",
        "gateway_analytics.browser_version": "7.51",
        "gateway_analytics.client_ip": "unknown",
        "gateway_analytics.device_type": "desktop",
        "gateway_analytics.error_message": "{\"error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\"},\"provider_error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\",\"type\":\"bad_gateway\",\"param\":\"gpt\",\"code\":null}}",
        "gateway_analytics.error_type": "Bad Gateway",
        "gateway_analytics.gateway_processing_ms": "0",
        "gateway_analytics.id": "019c139f-47b8-7253-9b1a-d017d38f5952",
        "gateway_analytics.is_bot": "false",
        "gateway_analytics.method": "POST",
        "gateway_analytics.os_name": "Other",
        "gateway_analytics.path": "/v1/responses",
        "gateway_analytics.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "gateway_analytics.prompt_id": "test_structured_data",
        "gateway_analytics.prompt_version": "1",
        "gateway_analytics.protocol_version": "HTTP/1.1",
        "gateway_analytics.request_headers": "{\"accept\":\"*/*\",\"content-type\":\"application/json\"}",
        "gateway_analytics.request_timestamp": "2026-01-31T10:35:31.640277240+00:00",
        "gateway_analytics.response_headers": "{\"content-type\":\"application/json\"}",
        "gateway_analytics.response_timestamp": "2026-01-31T10:35:34.698816688+00:00",
        "gateway_analytics.status_code": "502",
        "gateway_analytics.tags": "{}",
        "gateway_analytics.total_duration_ms": "3058",
        "gateway_analytics.user_agent": "PostmanRuntime/7.51.0",
        "idle_ns": "3013706938",
        "level": "INFO",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc"
      },
      "Duration": 3059435323,
      "StatusCode": "Error",
      "StatusMessage": "{\"error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\"},\"provider_error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\",\"type\":\"bad_gateway\",\"param\":\"gpt\",\"code\":null}}",
      "Events.Timestamp": [
        "2026-01-31 10:35:34.699163366"
      ],
      "Events.Name": [
        "Exception: Bad Gateway"
      ],
      "Events.Attributes": [
        {
          "error_message": "{\"error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\"},\"provider_error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\",\"type\":\"bad_gateway\",\"param\":\"gpt\",\"code\":null}}",
          "error_type": "Bad Gateway",
          "level": "ERROR",
          "target": "budgateway_internal::analytics_middleware"
        }
      ],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.681828217",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "89341abac9d8e6a4",
      "ParentSpanId": "730657a81c8e5151",
      "TraceState": "",
      "SpanName": "POST /v1/responses",
      "SpanKind": "Server",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "4747454",
        "http.request.method": "POST",
        "http.route": "/v1/responses",
        "idle_ns": "3012485874",
        "level": "INFO",
        "network.protocol.version": "1.1",
        "server.address": "localhost:56054",
        "span.type": "web",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker",
        "url.path": "/v1/responses",
        "url.scheme": "",
        "user_agent.original": "PostmanRuntime/7.51.0"
      },
      "Duration": 3017220715,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.682658950",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "b0062e1a357e4e4d",
      "ParentSpanId": "89341abac9d8e6a4",
      "TraceState": "",
      "SpanName": "response_create_handler_observability",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "3062854",
        "error.message": "Error from budprompt client: {\"error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\",\"type\":\"bad_gateway\",\"param\":\"gpt\",\"code\":null}}\nRaw request: {\"input\":\"Create a dynamic output\",\"prompt\":{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}}\nRaw response: {\"error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\",\"type\":\"bad_gateway\",\"param\":\"gpt\",\"code\":null}}",
        "error.type": "ModelProvidersExhausted",
        "gen_ai.gateway_request": "{\"input\":\"Create a dynamic output\",\"prompt\":{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}}",
        "gen_ai.gateway_response": "{\"error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\"},\"provider_error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\",\"type\":\"bad_gateway\",\"param\":\"gpt\",\"code\":null}}",
        "gen_ai.inference_id": "019c139f-47e2-7653-8c3b-7707b215694a",
        "gen_ai.input.messages": "Create a dynamic output",
        "gen_ai.operation.name": "response_create",
        "gen_ai.processing_time_ms": "3015",
        "gen_ai.prompt": "{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}",
        "gen_ai.prompt.id": "test_structured_data",
        "gen_ai.prompt.variables": "{}",
        "gen_ai.prompt.version": "1",
        "gen_ai.raw_request": "{\"input\":\"Create a dynamic output\",\"prompt\":{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}}",
        "gen_ai.raw_response": "Error from budprompt client: {\"error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\",\"type\":\"bad_gateway\",\"param\":\"gpt\",\"code\":null}}\nRaw request: {\"input\":\"Create a dynamic output\",\"prompt\":{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}}\nRaw response: {\"error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\",\"type\":\"bad_gateway\",\"param\":\"gpt\",\"code\":null}}",
        "gen_ai.request_arrival_time": "2026-01-31T10:35:31.682688926+00:00",
        "idle_ns": "3012759638",
        "level": "INFO",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc"
      },
      "Duration": 3015810118,
      "StatusCode": "Error",
      "StatusMessage": "Error from budprompt client: {\"error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\",\"type\":\"bad_gateway\",\"param\":\"gpt\",\"code\":null}}\nRaw request: {\"input\":\"Create a dynamic output\",\"prompt\":{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}}\nRaw response: {\"error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\",\"type\":\"bad_gateway\",\"param\":\"gpt\",\"code\":null}}",
      "Events.Timestamp": [
        "2026-01-31 10:35:34.698047370"
      ],
      "Events.Name": [
        "Exception: ModelProvidersExhausted"
      ],
      "Events.Attributes": [
        {
          "error_message": "Error from budprompt client: {\"error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\",\"type\":\"bad_gateway\",\"param\":\"gpt\",\"code\":null}}\nRaw request: {\"input\":\"Create a dynamic output\",\"prompt\":{\"id\":\"test_structured_data\",\"variables\":{},\"version\":\"1\"}}\nRaw response: {\"error\":{\"message\":\"status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\",\"type\":\"bad_gateway\",\"param\":\"gpt\",\"code\":null}}",
          "error_type": "ModelProvidersExhausted",
          "level": "ERROR",
          "target": "budgateway_internal::endpoints::openai_compatible"
        }
      ],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.683023861",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "2360585c847488e8",
      "ParentSpanId": "b0062e1a357e4e4d",
      "TraceState": "",
      "SpanName": "model_execute_response_with_detection",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2657486",
        "idle_ns": "3012253953",
        "level": "INFO",
        "model_name": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3014893186,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.683088492",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "74f996c1c79c185f",
      "ParentSpanId": "2360585c847488e8",
      "TraceState": "",
      "SpanName": "model_provider_execute_response_with_detection",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2400926",
        "idle_ns": "3012304939",
        "level": "INFO",
        "provider_name": "budprompt",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3014682522,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.683118258",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "885b8e10f4f7f6d2",
      "ParentSpanId": "74f996c1c79c185f",
      "TraceState": "",
      "SpanName": "budprompt_execute_response",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2207906",
        "idle_ns": "3012368707",
        "level": "INFO",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 3014572596,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.687501451",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "e45a96a5d75e828b",
      "ParentSpanId": "885b8e10f4f7f6d2",
      "TraceState": "",
      "SpanName": "invoke_agent budprompt",
      "SpanKind": "Internal",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "budprompt.responses.services",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "error.type": "ClientException",
        "gen_ai.input.messages": "Create a dynamic output",
        "gen_ai.operation.name": "invoke_agent",
        "gen_ai.prompt.id": "test_structured_data",
        "gen_ai.prompt.variables": "{}",
        "gen_ai.prompt.version": "1",
        "gen_ai.request.stream": "false"
      },
      "Duration": 2969115630,
      "StatusCode": "Error",
      "StatusMessage": "status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)",
      "Events.Timestamp": [
        "2026-01-31 10:35:34.656498990"
      ],
      "Events.Name": [
        "exception"
      ],
      "Events.Attributes": [
        {
          "exception.escaped": "False",
          "exception.message": "status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)",
          "exception.stacktrace": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/models/openai.py\", line 499, in _completions_create\n    return await self.client.chat.completions.create(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/openai/resources/chat/completions/completions.py\", line 2678, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/openai/_base_client.py\", line 1881, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/openai/_base_client.py\", line 1666, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.InternalServerError: Error code: 502 - {'error': 'All variants failed with 1 error(s)'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/app/budprompt/executors/v4/executor.py\", line 784, in _run_agent\n    result = await agent.run(\n             ^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/contextlib.py\", line 222, in __aexit__\n    await self.gen.athrow(typ, value, traceback)\n  File \"/usr/local/lib/python3.11/contextlib.py\", line 222, in __aexit__\n    await self.gen.athrow(typ, value, traceback)\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_graph/graph.py\", line 246, in iter\n    yield GraphRun[StateT, DepsT, RunEndT](\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/agent/__init__.py\", line 666, in iter\n    yield agent_run\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/agent/abstract.py\", line 235, in run\n    async for node in agent_run:\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/run.py\", line 150, in __anext__\n    next_node = await self._graph_run.__anext__()\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_graph/graph.py\", line 758, in __anext__\n    return await self.next(self._next_node)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/contextlib.py\", line 222, in __aexit__\n    await self.gen.athrow(typ, value, traceback)\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_graph/persistence/in_mem.py\", line 67, in record_run\n    yield\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_graph/graph.py\", line 731, in next\n    self._next_node = await node.run(ctx)\n                      ^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/_agent_graph.py\", line 416, in run\n    return await self._make_request(ctx)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/_agent_graph.py\", line 458, in _make_request\n    model_response = await ctx.deps.model.request(message_history, model_settings, model_request_parameters)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/models/instrumented.py\", line 362, in request\n    response = await self.wrapped.request(messages, model_settings, model_request_parameters)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/models/openai.py\", line 417, in request\n    response = await self._completions_create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/models/openai.py\", line 529, in _completions_create\n    raise ModelHTTPError(status_code=status_code, model_name=self.model_name, body=e.body) from e\npydantic_ai.exceptions.ModelHTTPError: status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/app/budprompt/prompt/services.py\", line 205, in execute_prompt\n    result = await self.executor.execute(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/budprompt/executors/v4/executor.py\", line 270, in execute\n    result = await self._run_agent(\n             ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/budprompt/executors/v4/executor.py\", line 806, in _run_agent\n    raise PromptExecutionException(e.message, status_code=e.status_code, param=e.model_name) from e\nbudprompt.commons.exceptions.PromptExecutionException: status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/app/budprompt/responses/services.py\", line 269, in execute_prompt\n    result = await PromptExecutorService().execute_prompt(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/budprompt/prompt/services.py\", line 253, in execute_prompt\n    raise ClientException(\nbudprompt.commons.exceptions.ClientException: status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\n",
          "exception.type": "budprompt.commons.exceptions.ClientException"
        }
      ],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.695859486",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "e0937d6e20d28fb6",
      "ParentSpanId": "e45a96a5d75e828b",
      "TraceState": "",
      "SpanName": "invoke_agent agent",
      "SpanKind": "Internal",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "pydantic-ai",
      "ScopeVersion": "1.4.0",
      "SpanAttributes": {
        "agent_name": "agent",
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "gen_ai.agent.name": "agent",
        "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"pydantic_ai.all_messages\": {\"type\": \"array\"}, \"pydantic_ai.new_message_index\": {}, \"final_result\": {\"type\": \"object\"}}}",
        "logfire.msg": "agent run",
        "model_name": "gpt",
        "pydantic_ai.all_messages": "[{\"role\": \"system\", \"parts\": [{\"type\": \"text\", \"content\": \"You are expert to create structured data make sure to give this in structured data\"}]}, {\"role\": \"user\", \"parts\": [{\"type\": \"text\", \"content\": \"Create a dynamic output\"}]}]",
        "pydantic_ai.new_message_index": "1"
      },
      "Duration": 2958354641,
      "StatusCode": "Error",
      "StatusMessage": "ModelHTTPError: status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)",
      "Events.Timestamp": [
        "2026-01-31 10:35:34.654113940"
      ],
      "Events.Name": [
        "exception"
      ],
      "Events.Attributes": [
        {
          "exception.escaped": "False",
          "exception.message": "status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)",
          "exception.stacktrace": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/models/openai.py\", line 499, in _completions_create\n    return await self.client.chat.completions.create(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/openai/resources/chat/completions/completions.py\", line 2678, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/openai/_base_client.py\", line 1881, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/openai/_base_client.py\", line 1666, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.InternalServerError: Error code: 502 - {'error': 'All variants failed with 1 error(s)'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.11/site-packages/opentelemetry/trace/__init__.py\", line 589, in use_span\n    yield span\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_graph/graph.py\", line 246, in iter\n    yield GraphRun[StateT, DepsT, RunEndT](\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/agent/__init__.py\", line 666, in iter\n    yield agent_run\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/agent/abstract.py\", line 235, in run\n    async for node in agent_run:\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/run.py\", line 150, in __anext__\n    next_node = await self._graph_run.__anext__()\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_graph/graph.py\", line 758, in __anext__\n    return await self.next(self._next_node)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/contextlib.py\", line 222, in __aexit__\n    await self.gen.athrow(typ, value, traceback)\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_graph/persistence/in_mem.py\", line 67, in record_run\n    yield\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_graph/graph.py\", line 731, in next\n    self._next_node = await node.run(ctx)\n                      ^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/_agent_graph.py\", line 416, in run\n    return await self._make_request(ctx)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/_agent_graph.py\", line 458, in _make_request\n    model_response = await ctx.deps.model.request(message_history, model_settings, model_request_parameters)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/models/instrumented.py\", line 362, in request\n    response = await self.wrapped.request(messages, model_settings, model_request_parameters)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/models/openai.py\", line 417, in request\n    response = await self._completions_create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/models/openai.py\", line 529, in _completions_create\n    raise ModelHTTPError(status_code=status_code, model_name=self.model_name, body=e.body) from e\npydantic_ai.exceptions.ModelHTTPError: status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\n",
          "exception.type": "pydantic_ai.exceptions.ModelHTTPError"
        }
      ],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.696687403",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "f1d20ec623b3a201",
      "ParentSpanId": "e0937d6e20d28fb6",
      "TraceState": "",
      "SpanName": "chat gpt",
      "SpanKind": "Internal",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "pydantic-ai",
      "ScopeVersion": "1.4.0",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "gen_ai.operation.name": "chat",
        "gen_ai.request.frequency_penalty": "0",
        "gen_ai.request.max_tokens": "2000",
        "gen_ai.request.model": "gpt",
        "gen_ai.request.presence_penalty": "0",
        "gen_ai.request.temperature": "0.7",
        "gen_ai.system": "openai",
        "logfire.json_schema": "{\"type\": \"object\", \"properties\": {\"model_request_parameters\": {\"type\": \"object\"}}}",
        "model_request_parameters": "{\"function_tools\": [], \"builtin_tools\": [], \"output_mode\": \"native\", \"output_object\": {\"json_schema\": {\"properties\": {\"name\": {\"type\": \"string\"}, \"age\": {\"type\": \"integer\"}, \"country\": {\"type\": \"string\"}}, \"required\": [\"name\", \"age\", \"country\"], \"type\": \"object\", \"additionalProperties\": false}, \"name\": \"Output\", \"description\": null, \"strict\": true}, \"output_tools\": [], \"allow_text_output\": true, \"allow_image_output\": false}",
        "server.address": "localhost",
        "server.port": "56054"
      },
      "Duration": 2955464139,
      "StatusCode": "Error",
      "StatusMessage": "ModelHTTPError: status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)",
      "Events.Timestamp": [
        "2026-01-31 10:35:34.652131836"
      ],
      "Events.Name": [
        "exception"
      ],
      "Events.Attributes": [
        {
          "exception.escaped": "False",
          "exception.message": "status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)",
          "exception.stacktrace": "Traceback (most recent call last):\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/models/openai.py\", line 499, in _completions_create\n    return await self.client.chat.completions.create(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/openai/resources/chat/completions/completions.py\", line 2678, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/openai/_base_client.py\", line 1881, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/openai/_base_client.py\", line 1666, in request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.InternalServerError: Error code: 502 - {'error': 'All variants failed with 1 error(s)'}\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.11/site-packages/opentelemetry/trace/__init__.py\", line 589, in use_span\n    yield span\n  File \"/usr/local/lib/python3.11/site-packages/opentelemetry/sdk/trace/__init__.py\", line 1105, in start_as_current_span\n    yield span\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/models/instrumented.py\", line 471, in _instrument\n    yield finish\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/models/instrumented.py\", line 362, in request\n    response = await self.wrapped.request(messages, model_settings, model_request_parameters)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/models/openai.py\", line 417, in request\n    response = await self._completions_create(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/local/lib/python3.11/site-packages/pydantic_ai/models/openai.py\", line 529, in _completions_create\n    raise ModelHTTPError(status_code=status_code, model_name=self.model_name, body=e.body) from e\npydantic_ai.exceptions.ModelHTTPError: status_code: 502, model_name: gpt, body: All variants failed with 1 error(s)\n",
          "exception.type": "pydantic_ai.exceptions.ModelHTTPError"
        }
      ],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.699704683",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "d04efb20021af186",
      "ParentSpanId": "f1d20ec623b3a201",
      "TraceState": "",
      "SpanName": "POST",
      "SpanKind": "Client",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "opentelemetry.instrumentation.httpx",
      "ScopeVersion": "0.60b1",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "http.method": "POST",
        "http.status_code": "502",
        "http.url": "http://localhost:56054/v1/chat/completions"
      },
      "Duration": 357953633,
      "StatusCode": "Error",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.702886878",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "8574ac06f049e08c",
      "ParentSpanId": "d04efb20021af186",
      "TraceState": "",
      "SpanName": "gateway_analytics",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "12462862",
        "gateway_analytics.browser_name": "Other",
        "gateway_analytics.client_ip": "unknown",
        "gateway_analytics.device_type": "desktop",
        "gateway_analytics.error_message": "{\"error\":\"All variants failed with 1 error(s)\"}",
        "gateway_analytics.error_type": "Bad Gateway",
        "gateway_analytics.gateway_processing_ms": "0",
        "gateway_analytics.id": "019c139f-47f7-7313-a075-c395c4f5428a",
        "gateway_analytics.inference_id": "019c139f-4957-7141-83a9-b2f8f441063a",
        "gateway_analytics.is_bot": "false",
        "gateway_analytics.method": "POST",
        "gateway_analytics.os_name": "Other",
        "gateway_analytics.path": "/v1/chat/completions",
        "gateway_analytics.protocol_version": "HTTP/1.1",
        "gateway_analytics.request_headers": "{\"content-type\":\"application/json\",\"accept\":\"application/json\"}",
        "gateway_analytics.request_timestamp": "2026-01-31T10:35:31.703197368+00:00",
        "gateway_analytics.response_headers": "{\"content-type\":\"application/json\"}",
        "gateway_analytics.response_timestamp": "2026-01-31T10:35:32.056213571+00:00",
        "gateway_analytics.status_code": "502",
        "gateway_analytics.tags": "{}",
        "gateway_analytics.total_duration_ms": "353",
        "gateway_analytics.user_agent": "budprompt v.4.0",
        "idle_ns": "341502424",
        "level": "INFO",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc"
      },
      "Duration": 353949617,
      "StatusCode": "Error",
      "StatusMessage": "{\"error\":\"All variants failed with 1 error(s)\"}",
      "Events.Timestamp": [
        "2026-01-31 10:35:32.056417943"
      ],
      "Events.Name": [
        "Exception: Bad Gateway"
      ],
      "Events.Attributes": [
        {
          "error_message": "{\"error\":\"All variants failed with 1 error(s)\"}",
          "error_type": "Bad Gateway",
          "level": "ERROR",
          "target": "budgateway_internal::analytics_middleware"
        }
      ],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.708164021",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "464e1dce08c5b4e8",
      "ParentSpanId": "8574ac06f049e08c",
      "TraceState": "",
      "SpanName": "POST /v1/chat/completions",
      "SpanKind": "Server",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "7911158",
        "http.request.method": "POST",
        "http.route": "/v1/chat/completions",
        "idle_ns": "340237546",
        "level": "INFO",
        "network.protocol.version": "1.1",
        "server.address": "localhost:56054",
        "span.type": "web",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker",
        "url.path": "/v1/chat/completions",
        "url.scheme": "",
        "user_agent.original": "budprompt v.4.0"
      },
      "Duration": 348133306,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.709681968",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "5d3a448664b1ee85",
      "ParentSpanId": "464e1dce08c5b4e8",
      "TraceState": "",
      "SpanName": "inference_handler_observability",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "5518284",
        "error.message": "All variants failed with 1 error(s)",
        "error.type": "AllVariantsFailed",
        "idle_ns": "340396516",
        "level": "INFO",
        "model_inference.cached": "false",
        "model_inference.endpoint_type": "chat",
        "model_inference.gateway_request": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are expert to create structured data make sure to give this in structured data\"},{\"role\":\"user\",\"content\":\"Create a dynamic output\"}],\"model\":\"gpt\",\"frequency_penalty\":0.0,\"max_completion_tokens\":2000,\"presence_penalty\":0.0,\"response_format\":{\"type\":\"json_schema\",\"json_schema\":{\"name\":\"Output\",\"schema\":{\"properties\":{\"name\":{\"type\":\"string\"},\"age\":{\"type\":\"integer\"},\"country\":{\"type\":\"string\"}},\"required\":[\"name\",\"age\",\"country\"],\"type\":\"object\",\"additionalProperties\":false},\"strict\":true}},\"stream\":false,\"temperature\":0.699999988079071}",
        "model_inference.gateway_response": "{\"error\":\"All variants failed with 1 error(s)\"}",
        "model_inference.guardrail_scan_summary": "{}",
        "model_inference.id": "019c139f-4952-7b10-a660-199208eecae5",
        "model_inference.inference_id": "019c139f-47fe-7771-9763-7fbc4148977c",
        "model_inference.input_messages": "[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"value\":\"Create a dynamic output\"}]}]",
        "model_inference.model_name": "019787c1-3de1-7b50-969b-e0a58514b6a2",
        "model_inference.model_provider_name": "unknown",
        "model_inference.output": "Error: All variants failed with 1 error(s)",
        "model_inference.raw_request": "",
        "model_inference.raw_response": "All variants failed with 1 error(s)",
        "model_inference.response_time_ms": "340",
        "model_inference.system": "You are expert to create structured data make sure to give this in structured data",
        "model_inference.timestamp": "1769855732",
        "model_inference_details.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference_details.error_code": "AllVariantsFailed",
        "model_inference_details.error_message": "All variants failed with 1 error(s)",
        "model_inference_details.error_type": "AllVariantsFailed",
        "model_inference_details.inference_id": "019c139f-4957-7141-83a9-b2f8f441063a",
        "model_inference_details.is_success": "false",
        "model_inference_details.model_id": "019787c1-3de1-7b50-969b-e0a58514b6a2",
        "model_inference_details.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "model_inference_details.request_arrival_time": "2026-01-31T10:35:31.709756838+00:00",
        "model_inference_details.request_forward_time": "2026-01-31T10:35:32.055381646+00:00",
        "model_inference_details.status_code": "502",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 345899081,
      "StatusCode": "Error",
      "StatusMessage": "All variants failed with 1 error(s)",
      "Events.Timestamp": [
        "2026-01-31 10:35:32.055289313"
      ],
      "Events.Name": [
        "Exception: AllVariantsFailed"
      ],
      "Events.Attributes": [
        {
          "error_message": "All variants failed with 1 error(s)",
          "error_type": "AllVariantsFailed",
          "level": "ERROR",
          "target": "budgateway_internal::endpoints::openai_compatible"
        }
      ],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.710171613",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "1e00ca025fa295ec",
      "ParentSpanId": "5d3a448664b1ee85",
      "TraceState": "",
      "SpanName": "function_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "analytics": "Some(Mutex { data: RequestAnalytics { record: GatewayAnalyticsDatabaseInsert { id: 019c139f-47f7-7313-a075-c395c4f5428a, inference_id: None, client_ip: \"unknown\", proxy_chain: None, protocol_version: \"HTTP/1.1\", country_code: None, country_name: None, region: None, city: None, latitude: None, longitude: None, timezone: None, asn: None, isp: None, user_agent: Some(\"budprompt v.4.0\"), device_type: Some(\"desktop\"), browser_name: Some(\"Other\"), browser_version: None, os_name: Some(\"Other\"), os_version: None, is_bot: false, method: \"POST\", path: \"/v1/chat/completions\", query_params: None, request_headers: {\"content-type\": \"application/json\", \"accept\": \"application/json\"}, body_size: None, api_key_id: None, auth_method: None, user_id: None, project_id: None, endpoint_id: None, request_timestamp: 2026-01-31T10:35:31.703197368Z, response_timestamp: 2026-01-31T10:35:31.703197368Z, gateway_processing_ms: 0, total_duration_ms: 0, model_latency_ms: None, model_name: None, model_provider: None, model_version: None, routing_decision: None, status_code: 0, response_size: None, response_headers: {}, error_type: None, error_message: None, is_blocked: false, blocking_event: None, tags: {} }, start_time: Instant { tv_sec: 98199, tv_nsec: 810136222 } } })",
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "4754337",
        "episode_id": "019c139f-47fe-7771-9763-7fc7b0d170c9",
        "idle_ns": "340080435",
        "inference_id": "019c139f-47fe-7771-9763-7fbc4148977c",
        "level": "INFO",
        "model_credential_store": "RwLock { data: {}, poisoned: false, .. }",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 344824512,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.710547055",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "f62fe6e03174a6b3",
      "ParentSpanId": "1e00ca025fa295ec",
      "TraceState": "",
      "SpanName": "variant_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2804060",
        "function_name": "budgateway::default",
        "idle_ns": "337338415",
        "level": "INFO",
        "stream": "false",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker",
        "variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4"
      },
      "Duration": 340129350,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.710690152",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "8bc59594d4664e94",
      "ParentSpanId": "f62fe6e03174a6b3",
      "TraceState": "",
      "SpanName": "model_chain_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2486947",
        "idle_ns": "337460614",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 339937833,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.710750315",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "279fec3b1b4aa92c",
      "ParentSpanId": "8bc59594d4664e94",
      "TraceState": "",
      "SpanName": "model_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2270433",
        "idle_ns": "337562313",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 339823759,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:31.710970947",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "465a8036124c7207",
      "ParentSpanId": "279fec3b1b4aa92c",
      "TraceState": "",
      "SpanName": "model_provider_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1778624",
        "gen_ai.operation.name": "chat",
        "gen_ai.request.model": "gpt-4.1-mini",
        "gen_ai.system": "vllm",
        "idle_ns": "337629769",
        "level": "INFO",
        "provider_name": "vllm",
        "stream": "false",
        "thread.id": "8",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 339399186,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:32.482154500",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "66944237e1af2862",
      "ParentSpanId": "f1d20ec623b3a201",
      "TraceState": "",
      "SpanName": "POST",
      "SpanKind": "Client",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "opentelemetry.instrumentation.httpx",
      "ScopeVersion": "0.60b1",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "http.method": "POST",
        "http.status_code": "502",
        "http.url": "http://localhost:56054/v1/chat/completions"
      },
      "Duration": 997997207,
      "StatusCode": "Error",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:32.483831615",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "50ca0f97ea228a7b",
      "ParentSpanId": "66944237e1af2862",
      "TraceState": "",
      "SpanName": "gateway_analytics",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "11377011",
        "gateway_analytics.browser_name": "Other",
        "gateway_analytics.client_ip": "unknown",
        "gateway_analytics.device_type": "desktop",
        "gateway_analytics.error_message": "{\"error\":\"All variants failed with 1 error(s)\"}",
        "gateway_analytics.error_type": "Bad Gateway",
        "gateway_analytics.gateway_processing_ms": "0",
        "gateway_analytics.id": "019c139f-4b04-7621-b639-877707dc71ff",
        "gateway_analytics.inference_id": "019c139f-4ee4-7742-9853-449b04db7f9c",
        "gateway_analytics.is_bot": "false",
        "gateway_analytics.method": "POST",
        "gateway_analytics.os_name": "Other",
        "gateway_analytics.path": "/v1/chat/completions",
        "gateway_analytics.protocol_version": "HTTP/1.1",
        "gateway_analytics.request_headers": "{\"accept\":\"application/json\",\"content-type\":\"application/json\"}",
        "gateway_analytics.request_timestamp": "2026-01-31T10:35:32.484119463+00:00",
        "gateway_analytics.response_headers": "{\"content-type\":\"application/json\"}",
        "gateway_analytics.response_timestamp": "2026-01-31T10:35:33.477611559+00:00",
        "gateway_analytics.status_code": "502",
        "gateway_analytics.tags": "{}",
        "gateway_analytics.total_duration_ms": "993",
        "gateway_analytics.user_agent": "budprompt v.4.0",
        "idle_ns": "984246976",
        "level": "INFO",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc"
      },
      "Duration": 995611803,
      "StatusCode": "Error",
      "StatusMessage": "{\"error\":\"All variants failed with 1 error(s)\"}",
      "Events.Timestamp": [
        "2026-01-31 10:35:33.477849213"
      ],
      "Events.Name": [
        "Exception: Bad Gateway"
      ],
      "Events.Attributes": [
        {
          "error_message": "{\"error\":\"All variants failed with 1 error(s)\"}",
          "error_type": "Bad Gateway",
          "level": "ERROR",
          "target": "budgateway_internal::analytics_middleware"
        }
      ],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:32.488231368",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "23922475401d078f",
      "ParentSpanId": "50ca0f97ea228a7b",
      "TraceState": "",
      "SpanName": "POST /v1/chat/completions",
      "SpanKind": "Server",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "6590709",
        "http.request.method": "POST",
        "http.route": "/v1/chat/completions",
        "idle_ns": "982903515",
        "level": "INFO",
        "network.protocol.version": "1.1",
        "server.address": "localhost:56054",
        "span.type": "web",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker",
        "url.path": "/v1/chat/completions",
        "url.scheme": "",
        "user_agent.original": "budprompt v.4.0"
      },
      "Duration": 989484676,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:32.489646372",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "de5779cc4b2f57ca",
      "ParentSpanId": "23922475401d078f",
      "TraceState": "",
      "SpanName": "inference_handler_observability",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "4294546",
        "error.message": "All variants failed with 1 error(s)",
        "error.type": "AllVariantsFailed",
        "idle_ns": "983136853",
        "level": "INFO",
        "model_inference.cached": "false",
        "model_inference.endpoint_type": "chat",
        "model_inference.gateway_request": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are expert to create structured data make sure to give this in structured data\"},{\"role\":\"user\",\"content\":\"Create a dynamic output\"}],\"model\":\"gpt\",\"frequency_penalty\":0.0,\"max_completion_tokens\":2000,\"presence_penalty\":0.0,\"response_format\":{\"type\":\"json_schema\",\"json_schema\":{\"name\":\"Output\",\"schema\":{\"properties\":{\"name\":{\"type\":\"string\"},\"age\":{\"type\":\"integer\"},\"country\":{\"type\":\"string\"}},\"required\":[\"name\",\"age\",\"country\"],\"type\":\"object\",\"additionalProperties\":false},\"strict\":true}},\"stream\":false,\"temperature\":0.699999988079071}",
        "model_inference.gateway_response": "{\"error\":\"All variants failed with 1 error(s)\"}",
        "model_inference.guardrail_scan_summary": "{}",
        "model_inference.id": "019c139f-4ee0-7713-8a85-105364a9f39c",
        "model_inference.inference_id": "019c139f-4b0a-7ad1-8797-9f293506fb85",
        "model_inference.input_messages": "[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"value\":\"Create a dynamic output\"}]}]",
        "model_inference.model_name": "019787c1-3de1-7b50-969b-e0a58514b6a2",
        "model_inference.model_provider_name": "unknown",
        "model_inference.output": "Error: All variants failed with 1 error(s)",
        "model_inference.raw_request": "",
        "model_inference.raw_response": "All variants failed with 1 error(s)",
        "model_inference.response_time_ms": "982",
        "model_inference.system": "You are expert to create structured data make sure to give this in structured data",
        "model_inference.timestamp": "1769855733",
        "model_inference_details.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference_details.error_code": "AllVariantsFailed",
        "model_inference_details.error_message": "All variants failed with 1 error(s)",
        "model_inference_details.error_type": "AllVariantsFailed",
        "model_inference_details.inference_id": "019c139f-4ee4-7742-9853-449b04db7f9c",
        "model_inference_details.is_success": "false",
        "model_inference_details.model_id": "019787c1-3de1-7b50-969b-e0a58514b6a2",
        "model_inference_details.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "model_inference_details.request_arrival_time": "2026-01-31T10:35:32.489703038+00:00",
        "model_inference_details.request_forward_time": "2026-01-31T10:35:33.476897454+00:00",
        "model_inference_details.status_code": "502",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 987420048,
      "StatusCode": "Error",
      "StatusMessage": "All variants failed with 1 error(s)",
      "Events.Timestamp": [
        "2026-01-31 10:35:33.476801184"
      ],
      "Events.Name": [
        "Exception: AllVariantsFailed"
      ],
      "Events.Attributes": [
        {
          "error_message": "All variants failed with 1 error(s)",
          "error_type": "AllVariantsFailed",
          "level": "ERROR",
          "target": "budgateway_internal::endpoints::openai_compatible"
        }
      ],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:32.490051119",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "001db759643de6f8",
      "ParentSpanId": "de5779cc4b2f57ca",
      "TraceState": "",
      "SpanName": "function_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "analytics": "Some(Mutex { data: RequestAnalytics { record: GatewayAnalyticsDatabaseInsert { id: 019c139f-4b04-7621-b639-877707dc71ff, inference_id: None, client_ip: \"unknown\", proxy_chain: None, protocol_version: \"HTTP/1.1\", country_code: None, country_name: None, region: None, city: None, latitude: None, longitude: None, timezone: None, asn: None, isp: None, user_agent: Some(\"budprompt v.4.0\"), device_type: Some(\"desktop\"), browser_name: Some(\"Other\"), browser_version: None, os_name: Some(\"Other\"), os_version: None, is_bot: false, method: \"POST\", path: \"/v1/chat/completions\", query_params: None, request_headers: {\"accept\": \"application/json\", \"content-type\": \"application/json\"}, body_size: None, api_key_id: None, auth_method: None, user_id: None, project_id: None, endpoint_id: None, request_timestamp: 2026-01-31T10:35:32.484119463Z, response_timestamp: 2026-01-31T10:35:32.484119463Z, gateway_processing_ms: 0, total_duration_ms: 0, model_latency_ms: None, model_name: None, model_provider: None, model_version: None, routing_decision: None, status_code: 0, response_size: None, response_headers: {}, error_type: None, error_message: None, is_blocked: false, blocking_event: None, tags: {} }, start_time: Instant { tv_sec: 98200, tv_nsec: 591060961 } } })",
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "3854784",
        "episode_id": "019c139f-4b0a-7ad1-8797-9f3392757592",
        "idle_ns": "982620277",
        "inference_id": "019c139f-4b0a-7ad1-8797-9f293506fb85",
        "level": "INFO",
        "model_credential_store": "RwLock { data: {}, poisoned: false, .. }",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 986466245,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:32.490404549",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "76dfca72d3a92105",
      "ParentSpanId": "001db759643de6f8",
      "TraceState": "",
      "SpanName": "variant_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2121675",
        "function_name": "budgateway::default",
        "idle_ns": "979625140",
        "level": "INFO",
        "stream": "false",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker",
        "variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4"
      },
      "Duration": 981738129,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:32.490502432",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "144e4e73d71a4462",
      "ParentSpanId": "76dfca72d3a92105",
      "TraceState": "",
      "SpanName": "model_chain_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1784424",
        "idle_ns": "979776994",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 981554766,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:32.490534853",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "99a7eb3ea8861329",
      "ParentSpanId": "144e4e73d71a4462",
      "TraceState": "",
      "SpanName": "model_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1612914",
        "idle_ns": "979858526",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 981468284,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:32.490721963",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "4dbc39cbf932cf61",
      "ParentSpanId": "99a7eb3ea8861329",
      "TraceState": "",
      "SpanName": "model_provider_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1149088",
        "gen_ai.operation.name": "chat",
        "gen_ai.request.model": "gpt-4.1-mini",
        "gen_ai.system": "vllm",
        "idle_ns": "979923065",
        "level": "INFO",
        "provider_name": "vllm",
        "stream": "false",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 981064188,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:34.314117211",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "52469d5132dad407",
      "ParentSpanId": "f1d20ec623b3a201",
      "TraceState": "",
      "SpanName": "POST",
      "SpanKind": "Client",
      "ServiceName": "budprompt",
      "ResourceAttributes": {
        "service.name": "budprompt",
        "telemetry.sdk.language": "python",
        "telemetry.sdk.name": "opentelemetry",
        "telemetry.sdk.version": "1.39.1"
      },
      "ScopeName": "opentelemetry.instrumentation.httpx",
      "ScopeVersion": "0.60b1",
      "SpanAttributes": {
        "bud.endpoint_id": "119787c1-3de1-7b50-969b-e0a58514b6a2",
        "bud.project_id": "119787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "http.method": "POST",
        "http.status_code": "502",
        "http.url": "http://localhost:56054/v1/chat/completions"
      },
      "Duration": 334395210,
      "StatusCode": "Error",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:34.315802551",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "b42123565b29169e",
      "ParentSpanId": "52469d5132dad407",
      "TraceState": "",
      "SpanName": "gateway_analytics",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "10225240",
        "gateway_analytics.browser_name": "Other",
        "gateway_analytics.client_ip": "unknown",
        "gateway_analytics.device_type": "desktop",
        "gateway_analytics.error_message": "{\"error\":\"All variants failed with 1 error(s)\"}",
        "gateway_analytics.error_type": "Bad Gateway",
        "gateway_analytics.gateway_processing_ms": "0",
        "gateway_analytics.id": "019c139f-522c-7360-b456-8a6b1c66ea4a",
        "gateway_analytics.inference_id": "019c139f-5376-7c02-b7b9-1b81f9951eb4",
        "gateway_analytics.is_bot": "false",
        "gateway_analytics.method": "POST",
        "gateway_analytics.os_name": "Other",
        "gateway_analytics.path": "/v1/chat/completions",
        "gateway_analytics.protocol_version": "HTTP/1.1",
        "gateway_analytics.request_headers": "{\"accept\":\"application/json\",\"content-type\":\"application/json\"}",
        "gateway_analytics.request_timestamp": "2026-01-31T10:35:34.316175367+00:00",
        "gateway_analytics.response_headers": "{\"content-type\":\"application/json\"}",
        "gateway_analytics.response_timestamp": "2026-01-31T10:35:34.647203335+00:00",
        "gateway_analytics.status_code": "502",
        "gateway_analytics.tags": "{}",
        "gateway_analytics.total_duration_ms": "331",
        "gateway_analytics.user_agent": "budprompt v.4.0",
        "idle_ns": "321790043",
        "level": "INFO",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc"
      },
      "Duration": 331998942,
      "StatusCode": "Error",
      "StatusMessage": "{\"error\":\"All variants failed with 1 error(s)\"}",
      "Events.Timestamp": [
        "2026-01-31 10:35:34.647407556"
      ],
      "Events.Name": [
        "Exception: Bad Gateway"
      ],
      "Events.Attributes": [
        {
          "error_message": "{\"error\":\"All variants failed with 1 error(s)\"}",
          "error_type": "Bad Gateway",
          "level": "ERROR",
          "target": "budgateway_internal::analytics_middleware"
        }
      ],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:34.320441461",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "7cd62e7d09ac0e89",
      "ParentSpanId": "b42123565b29169e",
      "TraceState": "",
      "SpanName": "POST /v1/chat/completions",
      "SpanKind": "Server",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "6471907",
        "http.request.method": "POST",
        "http.route": "/v1/chat/completions",
        "idle_ns": "320398320",
        "level": "INFO",
        "network.protocol.version": "1.1",
        "server.address": "localhost:56054",
        "span.type": "web",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker",
        "url.path": "/v1/chat/completions",
        "url.scheme": "",
        "user_agent.original": "budprompt v.4.0"
      },
      "Duration": 326860187,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:34.321981078",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "18b47f7ad562e55f",
      "ParentSpanId": "7cd62e7d09ac0e89",
      "TraceState": "",
      "SpanName": "inference_handler_observability",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "4140290",
        "error.message": "All variants failed with 1 error(s)",
        "error.type": "AllVariantsFailed",
        "idle_ns": "320522481",
        "level": "INFO",
        "model_inference.cached": "false",
        "model_inference.endpoint_type": "chat",
        "model_inference.gateway_request": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are expert to create structured data make sure to give this in structured data\"},{\"role\":\"user\",\"content\":\"Create a dynamic output\"}],\"model\":\"gpt\",\"frequency_penalty\":0.0,\"max_completion_tokens\":2000,\"presence_penalty\":0.0,\"response_format\":{\"type\":\"json_schema\",\"json_schema\":{\"name\":\"Output\",\"schema\":{\"properties\":{\"name\":{\"type\":\"string\"},\"age\":{\"type\":\"integer\"},\"country\":{\"type\":\"string\"}},\"required\":[\"name\",\"age\",\"country\"],\"type\":\"object\",\"additionalProperties\":false},\"strict\":true}},\"stream\":false,\"temperature\":0.699999988079071}",
        "model_inference.gateway_response": "{\"error\":\"All variants failed with 1 error(s)\"}",
        "model_inference.guardrail_scan_summary": "{}",
        "model_inference.id": "019c139f-5371-7d50-9a3e-76eee71f1b0e",
        "model_inference.inference_id": "019c139f-5232-70c3-a024-5e87a28c4c42",
        "model_inference.input_messages": "[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"value\":\"Create a dynamic output\"}]}]",
        "model_inference.model_name": "019787c1-3de1-7b50-969b-e0a58514b6a2",
        "model_inference.model_provider_name": "unknown",
        "model_inference.output": "Error: All variants failed with 1 error(s)",
        "model_inference.raw_request": "",
        "model_inference.raw_response": "All variants failed with 1 error(s)",
        "model_inference.response_time_ms": "319",
        "model_inference.system": "You are expert to create structured data make sure to give this in structured data",
        "model_inference.timestamp": "1769855734",
        "model_inference_details.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference_details.error_code": "AllVariantsFailed",
        "model_inference_details.error_message": "All variants failed with 1 error(s)",
        "model_inference_details.error_type": "AllVariantsFailed",
        "model_inference_details.inference_id": "019c139f-5376-7c02-b7b9-1b81f9951eb4",
        "model_inference_details.is_success": "false",
        "model_inference_details.model_id": "019787c1-3de1-7b50-969b-e0a58514b6a2",
        "model_inference_details.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "model_inference_details.request_arrival_time": "2026-01-31T10:35:34.322015262+00:00",
        "model_inference_details.request_forward_time": "2026-01-31T10:35:34.646457340+00:00",
        "model_inference_details.status_code": "502",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 324651139,
      "StatusCode": "Error",
      "StatusMessage": "All variants failed with 1 error(s)",
      "Events.Timestamp": [
        "2026-01-31 10:35:34.646363194"
      ],
      "Events.Name": [
        "Exception: AllVariantsFailed"
      ],
      "Events.Attributes": [
        {
          "error_message": "All variants failed with 1 error(s)",
          "error_type": "AllVariantsFailed",
          "level": "ERROR",
          "target": "budgateway_internal::endpoints::openai_compatible"
        }
      ],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:34.322456757",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "c3cccd54278b91a7",
      "ParentSpanId": "18b47f7ad562e55f",
      "TraceState": "",
      "SpanName": "function_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "analytics": "Some(Mutex { data: RequestAnalytics { record: GatewayAnalyticsDatabaseInsert { id: 019c139f-522c-7360-b456-8a6b1c66ea4a, inference_id: None, client_ip: \"unknown\", proxy_chain: None, protocol_version: \"HTTP/1.1\", country_code: None, country_name: None, region: None, city: None, latitude: None, longitude: None, timezone: None, asn: None, isp: None, user_agent: Some(\"budprompt v.4.0\"), device_type: Some(\"desktop\"), browser_name: Some(\"Other\"), browser_version: None, os_name: Some(\"Other\"), os_version: None, is_bot: false, method: \"POST\", path: \"/v1/chat/completions\", query_params: None, request_headers: {\"accept\": \"application/json\", \"content-type\": \"application/json\"}, body_size: None, api_key_id: None, auth_method: None, user_id: None, project_id: None, endpoint_id: None, request_timestamp: 2026-01-31T10:35:34.316175367Z, response_timestamp: 2026-01-31T10:35:34.316175367Z, gateway_processing_ms: 0, total_duration_ms: 0, model_latency_ms: None, model_name: None, model_provider: None, model_version: None, routing_decision: None, status_code: 0, response_size: None, response_headers: {}, error_type: None, error_message: None, is_blocked: false, blocking_event: None, tags: {} }, start_time: Instant { tv_sec: 98202, tv_nsec: 423116265 } } })",
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "3530210",
        "episode_id": "019c139f-5232-70c3-a024-5e9c7c376baf",
        "idle_ns": "320050148",
        "inference_id": "019c139f-5232-70c3-a024-5e87a28c4c42",
        "level": "INFO",
        "model_credential_store": "RwLock { data: {}, poisoned: false, .. }",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 323563055,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:34.322849601",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "967903ed215e6652",
      "ParentSpanId": "c3cccd54278b91a7",
      "TraceState": "",
      "SpanName": "variant_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1767364",
        "function_name": "budgateway::default",
        "idle_ns": "316982719",
        "level": "INFO",
        "stream": "false",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker",
        "variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4"
      },
      "Duration": 318740165,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:34.322953906",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "9a54b76fbe64a8ac",
      "ParentSpanId": "967903ed215e6652",
      "TraceState": "",
      "SpanName": "model_chain_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1605280",
        "idle_ns": "316989122",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 318587299,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:34.322986988",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "c4ccb66f05e7d13d",
      "ParentSpanId": "9a54b76fbe64a8ac",
      "TraceState": "",
      "SpanName": "model_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1510183",
        "idle_ns": "317002576",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 318509183,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:35:34.323207310",
      "TraceId": "c85ec23fa1f94e3371bdd4ae86e5ae3a",
      "SpanId": "5c61c019baea2798",
      "ParentSpanId": "c4ccb66f05e7d13d",
      "TraceState": "",
      "SpanName": "model_provider_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "bud.prompt_id": "119787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1059110",
        "gen_ai.operation.name": "chat",
        "gen_ai.request.model": "gpt-4.1-mini",
        "gen_ai.system": "vllm",
        "idle_ns": "317057710",
        "level": "INFO",
        "provider_name": "vllm",
        "stream": "false",
        "thread.id": "6",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 318107653,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    }
  ],
  "chat_success": [
    {
      "Timestamp": "2026-01-31 10:37:35.930284485",
      "TraceId": "ca7cf06623df5248d39b9d9c8c99f757",
      "SpanId": "799e87b5c0180cd3",
      "ParentSpanId": "",
      "TraceState": "",
      "SpanName": "gateway_analytics",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "8779845",
        "gateway_analytics.browser_name": "PostmanRuntime",
        "gateway_analytics.browser_version": "7.51",
        "gateway_analytics.client_ip": "unknown",
        "gateway_analytics.device_type": "desktop",
        "gateway_analytics.gateway_processing_ms": "8",
        "gateway_analytics.id": "019c13a1-2d3a-7c93-9e32-38c5f8799048",
        "gateway_analytics.inference_id": "019c13a1-2d3e-72c2-9aad-da19996c1e6f",
        "gateway_analytics.is_bot": "false",
        "gateway_analytics.method": "POST",
        "gateway_analytics.os_name": "Other",
        "gateway_analytics.path": "/v1/chat/completions",
        "gateway_analytics.protocol_version": "HTTP/1.1",
        "gateway_analytics.request_headers": "{\"accept\":\"*/*\",\"content-type\":\"application/json\"}",
        "gateway_analytics.request_timestamp": "2026-01-31T10:37:35.930499838+00:00",
        "gateway_analytics.response_headers": "{\"content-type\":\"application/json\"}",
        "gateway_analytics.response_timestamp": "2026-01-31T10:37:36.756553606+00:00",
        "gateway_analytics.status_code": "200",
        "gateway_analytics.tags": "{}",
        "gateway_analytics.total_duration_ms": "826",
        "gateway_analytics.user_agent": "PostmanRuntime/7.51.0",
        "idle_ns": "817854968",
        "level": "INFO",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "bud.api_key_id": "019787c1-3de1-7b50-969b-e0a58514aaaa",
        "bud.api_key_project_id": "019787c1-3de1-7b50-969b-e0a58514bbbb",
        "bud.user_id": "019787c1-3de1-7b50-969b-e0a58514cccc"
      },
      "Duration": 826622832,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:37:35.933789699",
      "TraceId": "ca7cf06623df5248d39b9d9c8c99f757",
      "SpanId": "1cf70d29ea24d059",
      "ParentSpanId": "799e87b5c0180cd3",
      "TraceState": "",
      "SpanName": "POST /v1/chat/completions",
      "SpanKind": "Server",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "4708745",
        "http.request.method": "POST",
        "http.route": "/v1/chat/completions",
        "idle_ns": "818488472",
        "level": "INFO",
        "network.protocol.version": "1.1",
        "server.address": "localhost:56054",
        "span.type": "web",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "url.path": "/v1/chat/completions",
        "url.scheme": "",
        "user_agent.original": "PostmanRuntime/7.51.0"
      },
      "Duration": 823187850,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:37:35.934568165",
      "TraceId": "ca7cf06623df5248d39b9d9c8c99f757",
      "SpanId": "6263df2802b672fe",
      "ParentSpanId": "1cf70d29ea24d059",
      "TraceState": "",
      "SpanName": "inference_handler_observability",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "3664871",
        "chat_inference.episode_id": "019c13a1-2d3e-72c2-9aad-da2591e777a4",
        "chat_inference.extra_body": "[]",
        "chat_inference.function_name": "budgateway::default",
        "chat_inference.id": "019c13a1-2d3e-72c2-9aad-da19996c1e6f",
        "chat_inference.inference_params": "{\"chat_completion\":{}}",
        "chat_inference.input": "{\"messages\":[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"value\":\"Summarize the given texts stream\"}]}]}",
        "chat_inference.output": "[{\"type\":\"text\",\"text\":\"Sure! Please provide the text or texts you'd like me to summarize.\"}]",
        "chat_inference.processing_time_ms": "820",
        "chat_inference.tags": "{}",
        "chat_inference.variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "idle_ns": "817958242",
        "level": "INFO",
        "model_inference.cached": "false",
        "model_inference.endpoint_type": "chat",
        "model_inference.finish_reason": "stop",
        "model_inference.gateway_request": "{\"messages\":[{\"role\":\"user\",\"content\":\"Summarize the given texts stream\"}],\"model\":\"gpt-4.1-mini\",\"stream\":false,\"logprobs\":false}",
        "model_inference.gateway_response": "{\"id\":\"chatcmpl-D42e8w6XPmU4YW66PRJvjB2C9RaML\",\"object\":\"chat.completion\",\"created\":1769855856,\"model\":\"gpt-4.1-mini-2025-04-14\",\"choices\":[{\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"Sure! Please provide the text or texts you'd like me to summarize.\",\"refusal\":null,\"annotations\":[]},\"logprobs\":null,\"finish_reason\":\"stop\"}],\"usage\":{\"prompt_tokens\":14,\"completion_tokens\":14,\"total_tokens\":28,\"prompt_tokens_details\":{\"cached_tokens\":0,\"audio_tokens\":0},\"completion_tokens_details\":{\"reasoning_tokens\":0,\"audio_tokens\":0,\"accepted_prediction_tokens\":0,\"rejected_prediction_tokens\":0}},\"service_tier\":\"default\",\"system_fingerprint\":\"fp_e01c6f58e1\"}",
        "model_inference.id": "019c13a1-3072-7372-ac97-a54cd2c5df72",
        "model_inference.inference_id": "019c13a1-2d3e-72c2-9aad-da19996c1e6f",
        "model_inference.input_messages": "[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"Summarize the given texts stream\"}]}]",
        "model_inference.input_tokens": "14",
        "model_inference.model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference.model_provider_name": "vllm",
        "model_inference.output": "[{\"type\":\"text\",\"text\":\"Sure! Please provide the text or texts you'd like me to summarize.\"}]",
        "model_inference.output_tokens": "14",
        "model_inference.raw_request": "{\"messages\":[{\"role\":\"user\",\"content\":\"Summarize the given texts stream\"}],\"model\":\"gpt-4.1-mini\",\"stream\":false,\"logprobs\":false}",
        "model_inference.raw_response": "{\"id\":\"chatcmpl-D42e8w6XPmU4YW66PRJvjB2C9RaML\",\"object\":\"chat.completion\",\"created\":1769855856,\"model\":\"gpt-4.1-mini-2025-04-14\",\"choices\":[{\"index\":0,\"message\":{\"role\":\"assistant\",\"content\":\"Sure! Please provide the text or texts you'd like me to summarize.\",\"refusal\":null,\"annotations\":[]},\"logprobs\":null,\"finish_reason\":\"stop\"}],\"usage\":{\"prompt_tokens\":14,\"completion_tokens\":14,\"total_tokens\":28,\"prompt_tokens_details\":{\"cached_tokens\":0,\"audio_tokens\":0},\"completion_tokens_details\":{\"reasoning_tokens\":0,\"audio_tokens\":0,\"accepted_prediction_tokens\":0,\"rejected_prediction_tokens\":0}},\"service_tier\":\"default\",\"system_fingerprint\":\"fp_e01c6f58e1\"}",
        "model_inference.response_time_ms": "818",
        "model_inference.timestamp": "1769855856",
        "model_inference_details.cost": "0.0005600000000000001",
        "model_inference_details.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "model_inference_details.inference_id": "019c13a1-2d3e-72c2-9aad-da19996c1e6f",
        "model_inference_details.is_success": "true",
        "model_inference_details.model_id": "019787c1-3de1-7b50-969b-e0a58514b6a2",
        "model_inference_details.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "model_inference_details.request_arrival_time": "2026-01-31T10:37:35.934603701+00:00",
        "model_inference_details.request_forward_time": "2026-01-31T10:37:36.755364182+00:00",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 821613926,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:37:35.934846235",
      "TraceId": "ca7cf06623df5248d39b9d9c8c99f757",
      "SpanId": "8ea80727b5750792",
      "ParentSpanId": "6263df2802b672fe",
      "TraceState": "",
      "SpanName": "function_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "analytics": "Some(Mutex { data: RequestAnalytics { record: GatewayAnalyticsDatabaseInsert { id: 019c13a1-2d3a-7c93-9e32-38c5f8799048, inference_id: None, client_ip: \"unknown\", proxy_chain: None, protocol_version: \"HTTP/1.1\", country_code: None, country_name: None, region: None, city: None, latitude: None, longitude: None, timezone: None, asn: None, isp: None, user_agent: Some(\"PostmanRuntime/7.51.0\"), device_type: Some(\"desktop\"), browser_name: Some(\"PostmanRuntime\"), browser_version: Some(\"7.51\"), os_name: Some(\"Other\"), os_version: None, is_bot: false, method: \"POST\", path: \"/v1/chat/completions\", query_params: None, request_headers: {\"accept\": \"*/*\", \"content-type\": \"application/json\"}, body_size: None, api_key_id: None, auth_method: None, user_id: None, project_id: None, endpoint_id: None, request_timestamp: 2026-01-31T10:37:35.930499838Z, response_timestamp: 2026-01-31T10:37:35.930499838Z, gateway_processing_ms: 0, total_duration_ms: 0, model_latency_ms: None, model_name: None, model_provider: None, model_version: None, routing_decision: None, status_code: 0, response_size: None, response_headers: {}, error_type: None, error_message: None, is_blocked: false, blocking_event: None, tags: {} }, start_time: Instant { tv_sec: 98324, tv_nsec: 37440235 } } })",
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2549476",
        "episode_id": "019c13a1-2d3e-72c2-9aad-da2591e777a4",
        "idle_ns": "817657910",
        "inference_id": "019c13a1-2d3e-72c2-9aad-da19996c1e6f",
        "level": "INFO",
        "model_credential_store": "RwLock { data: {}, poisoned: false, .. }",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 820199582,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:37:35.935175721",
      "TraceId": "ca7cf06623df5248d39b9d9c8c99f757",
      "SpanId": "efb8e0da866644a2",
      "ParentSpanId": "8ea80727b5750792",
      "TraceState": "",
      "SpanName": "variant_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "2139931",
        "function_name": "budgateway::default",
        "idle_ns": "817629797",
        "level": "INFO",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker",
        "variant_name": "019787c1-3de1-7b50-969b-e0a58514b6a4"
      },
      "Duration": 819761152,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:37:35.935271740",
      "TraceId": "ca7cf06623df5248d39b9d9c8c99f757",
      "SpanId": "a12156c323fbb431",
      "ParentSpanId": "efb8e0da866644a2",
      "TraceState": "",
      "SpanName": "model_chain_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1910954",
        "idle_ns": "817662708",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 819567040,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:37:35.935303790",
      "TraceId": "ca7cf06623df5248d39b9d9c8c99f757",
      "SpanId": "81c581764f0df869",
      "ParentSpanId": "a12156c323fbb431",
      "TraceState": "",
      "SpanName": "model_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1813081",
        "idle_ns": "817692814",
        "level": "INFO",
        "model_name": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 819502579,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    },
    {
      "Timestamp": "2026-01-31 10:37:35.935461736",
      "TraceId": "ca7cf06623df5248d39b9d9c8c99f757",
      "SpanId": "5d11b0f46c059188",
      "ParentSpanId": "81c581764f0df869",
      "TraceState": "",
      "SpanName": "model_provider_inference",
      "SpanKind": "Internal",
      "ServiceName": "budgateway",
      "ResourceAttributes": {
        "service.name": "budgateway"
      },
      "ScopeName": "budgateway",
      "ScopeVersion": "",
      "SpanAttributes": {
        "bud.endpoint_id": "019787c1-3de1-7b50-969b-e0a58514b6a4",
        "bud.project_id": "019787c1-3de1-7b50-969b-e0a58514b6a1",
        "busy_ns": "1491570",
        "gen_ai.operation.name": "chat",
        "gen_ai.request.model": "gpt-4.1-mini",
        "gen_ai.system": "vllm",
        "idle_ns": "817766963",
        "level": "INFO",
        "provider_name": "vllm",
        "stream": "false",
        "thread.id": "2",
        "thread.name": "tokio-runtime-worker"
      },
      "Duration": 819250647,
      "StatusCode": "Unset",
      "StatusMessage": "",
      "Events.Timestamp": [],
      "Events.Name": [],
      "Events.Attributes": [],
      "Links.TraceId": [],
      "Links.SpanId": [],
      "Links.TraceState": [],
      "Links.Attributes": []
    }
  ]
}
